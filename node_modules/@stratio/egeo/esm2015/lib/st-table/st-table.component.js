/**
 * @fileoverview added by tsickle
 * Generated from: lib/st-table/st-table.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * © 2017 Stratio Big Data Inc., Sucursal en España.
 *
 * This software is licensed under the Apache License, Version 2.0.
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the terms of the License for more details.
 *
 * SPDX-License-Identifier: Apache-2.0.
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, TemplateRef, HostBinding, Host } from '@angular/core';
import { StEgeo, StRequired } from '../decorators/require-decorators';
import { Order, ORDER_TYPE } from './shared/order';
import { cloneDeep as _cloneDeep, get as _get } from 'lodash';
import { StTableIconClasses } from './st-table.interface';
/**
 * \@description {Component} [Table]
 *
 * The table component has been designed to display any content like images, text, graphs, etc.
 *
 * * \@model
 *
 *   [StTableHeader] {./shared/table-header.interface.ts#StTableHeader}
 *   [StDynamicTableHeader] {./shared/table-header.interface.ts#StFilterElement}
 *   [StFilterHeader] {./shared/table-header.interface.ts#StFilterHeader}
 *   [StTableFilterIconClasses] {./st-table.interface.ts#StTableFilterIconClasses}
 *   [StTableIconClasses] {./st-table.interface.ts#StTableIconClasses}
 *
 * \@example
 *
 * {html}
 *
 * ```
 * <st-table [fields]="fields" [sortable]="true" (changeOrder)="yourFunctionToOrder($event)">
 * <tr st-table-row *ngFor="let userData of data">
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.id}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.name}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.lastName}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.phone}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.company}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.completedProfile}}</label>
 * </td>
 * <td st-table-row-hover>
 *    <i class="icon icon-arrow2_right"></i>
 * </td>
 * </tr>
 * </st-table>
 * ```
 *
 */
let StTableComponent = /**
 * \@description {Component} [Table]
 *
 * The table component has been designed to display any content like images, text, graphs, etc.
 *
 * * \@model
 *
 *   [StTableHeader] {./shared/table-header.interface.ts#StTableHeader}
 *   [StDynamicTableHeader] {./shared/table-header.interface.ts#StFilterElement}
 *   [StFilterHeader] {./shared/table-header.interface.ts#StFilterHeader}
 *   [StTableFilterIconClasses] {./st-table.interface.ts#StTableFilterIconClasses}
 *   [StTableIconClasses] {./st-table.interface.ts#StTableIconClasses}
 *
 * \@example
 *
 * {html}
 *
 * ```
 * <st-table [fields]="fields" [sortable]="true" (changeOrder)="yourFunctionToOrder($event)">
 * <tr st-table-row *ngFor="let userData of data">
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.id}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.name}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.lastName}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.phone}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.company}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.completedProfile}}</label>
 * </td>
 * <td st-table-row-hover>
 *    <i class="icon icon-arrow2_right"></i>
 * </td>
 * </tr>
 * </st-table>
 * ```
 *
 */
class StTableComponent {
    /**
     * @param {?} _cd
     */
    constructor(_cd) {
        this._cd = _cd;
        /**
         * \@Input {boolean} [header=true] Boolean to show or hide the header
         */
        this.header = true;
        /**
         * \@Input {boolean} [sortable=true] Boolean to make sortable the table, To enable sorting of columns use
         * the new "sortable" field inside stTableHeader model
         */
        this.sortable = true;
        /**
         * \@Input {boolean} [filterable=true] Boolean to make filterable the table, To enable filtering of columns use
         * the new "filterable" field inside stTableHeader model (necesary define filterConfig).
         */
        this.filterable = false;
        /**
         * \@Input {boolean} [selectableAll=false] Boolean to show or hide a checkbox in the header to select or
         *  deselect all rows
         */
        this.selectableAll = false;
        /**
         * \@Input {StTableIconClasses} [iconClasses=''] List of icon classes
         */
        this.iconClasses = new StTableIconClasses();
        /**
         * \@Output {Order} [changeOrder=''] Event emitted with the new order which has to be applied to the table rows
         */
        this.changeOrder = new EventEmitter();
        /**
         * \@Output {boolean} [selectAll=''] Event emitted when user interacts with the checkbox to select or deselect
         * all rows
         */
        this.selectAll = new EventEmitter();
        /**
         * \@Output {string} [clickFilter=] Event emitted when clicking on filters icon
         */
        this.clickFilter = new EventEmitter();
        /**
         * \@Output {StTableHeader[]} [selectFilters=''] Event emitted  when user interacts with filter button without a custom template
         */
        this.selectFilters = new EventEmitter();
        this.tableClasses = {};
        this.orderTypes = ORDER_TYPE;
        this.visibleFilter = -1;
        this._fixedHeader = false;
        this._hasHoverMenu = false;
    }
    /**
     * \@Input {boolean} [fixedHeader=false] Boolean to fix the table header
     * @return {?}
     */
    get fixedHeader() {
        return this._fixedHeader;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set fixedHeader(newValue) {
        this._fixedHeader = newValue;
    }
    /**
     * \@Input {string} [customClasses=] Classes for adding styles to table tag from outside. These can be: separated-rows
     * @return {?}
     */
    get customClasses() {
        return this._customClasses;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set customClasses(newValue) {
        this.tableClasses[this._customClasses] = undefined;
        this._customClasses = newValue;
        this.tableClasses[this._customClasses] = this._customClasses;
    }
    /**
     * \@Input {boolean} [selectedAll=false] It specifies if all rows are selected
     * @return {?}
     */
    get selectedAll() {
        return this._selectedAll;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set selectedAll(newValue) {
        this._selectedAll = newValue;
        this._cd.markForCheck();
    }
    /**
     * \@Input {boolean} [hasHoverMenu=false] It specifies if a menu has to be displayed when user puts the mouse over
     * the rows. Remember to add a cell with the selector st-table-row-hover for adding content to the menu
     * @return {?}
     */
    get hasHoverMenu() {
        return this._hasHoverMenu;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set hasHoverMenu(newValue) {
        this._hasHoverMenu = newValue;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.filterable && !this.statusFilter) {
            this.statusFilter = new Array(this.fields.length);
            this.statusFilter.fill(false);
        }
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getHeaderItemClass(field) {
        /** @type {?} */
        let isOrderAsc = this.isSortedByFieldAndDirection(field, this.orderTypes.ASC);
        return isOrderAsc ? this.iconClasses.sort.asc : this.iconClasses.sort.desc;
    }
    /**
     * @param {?} field
     * @return {?}
     */
    isSortable(field) {
        return field && field.sortable !== undefined ? field.sortable : this.sortable;
    }
    /**
     * @param {?} field
     * @return {?}
     */
    isSortedByField(field) {
        return this.currentOrder && this.currentOrder.orderBy === field.id;
    }
    /**
     * @param {?} field
     * @return {?}
     */
    isFilterable(field) {
        return this.filterable && (_get(field, 'filters.filterConfig')) ||
            (this.templateContentFilter && _get(field, 'filters')) ||
            _get(field, 'filters.templateRef');
    }
    /**
     * @param {?} index
     * @param {?} field
     * @return {?}
     */
    onClickPopover(index, field) {
        if (this.visibleFilter === index) {
            this.visibleFilter = -1;
        }
        else {
            this.visibleFilter = index;
        }
        this.clickFilter.emit(field);
        this._cd.markForCheck();
    }
    /**
     * @param {?} field
     * @return {?}
     */
    onChangeOrder(field) {
        /** @type {?} */
        let _currentOrder;
        if (field && this.isSortable(field)) {
            if (this.currentOrder && this.currentOrder.orderBy === field.id) {
                _currentOrder = this.changeOrderDirection();
            }
            else {
                _currentOrder = new Order(field.id, ORDER_TYPE.ASC);
            }
            this.changeOrder.emit(_currentOrder);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onSelectAll(event) {
        this.selectAll.emit(event.checked);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onSelectedFilters(event) {
        /** @type {?} */
        let selectedFilters = _cloneDeep(this.fields);
        selectedFilters = selectedFilters.filter((/**
         * @param {?} field
         * @return {?}
         */
        (field) => {
            if (_get(field, 'filters.filterConfig')) {
                field.filters.filterConfig = field.filters.filterConfig.filter((/**
                 * @param {?} conf
                 * @return {?}
                 */
                (conf) => conf.selected));
                if (field.filters.filterConfig.length > 0) {
                    return field;
                }
            }
        }));
        this.selectFilters.emit(selectedFilters);
    }
    /**
     * @private
     * @return {?}
     */
    changeOrderDirection() {
        /** @type {?} */
        let newDirection = this.currentOrder.type === ORDER_TYPE.ASC ? ORDER_TYPE.DESC : ORDER_TYPE.ASC;
        return new Order(this.currentOrder.orderBy, newDirection);
    }
    /**
     * @private
     * @param {?} field
     * @param {?} orderType
     * @return {?}
     */
    isSortedByFieldAndDirection(field, orderType) {
        return this.isSortedByField(field) && this.currentOrder.type === orderType;
    }
};
StTableComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
StTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'st-table',
                template: "<!--\n\n    \u00A9 2017 Stratio Big Data Inc., Sucursal en Espa\u00F1a.\n\n    This software is licensed under the Apache License, Version 2.0.\n    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n    See the terms of the License for more details.\n\n    SPDX-License-Identifier: Apache-2.0.\n\n-->\n<table class='st-table' [ngClass]=\"tableClasses\" [attr.id]='qaTag'>\n   <thead>\n      <tr *ngIf=\"header\" class='st-table__header'>\n\n         <th *ngFor='let field of fields; let i = index' class='st-table__header-item' [ngClass]=\"{\n             'st-table__header-item--selected': isSortedByField(field),\n             'st-table__header-item--sortable': isSortable(field),\n             'st-table__header-item--filterable': isFilterable(field)}\">\n            <st-checkbox *ngIf=\"i == 0 && selectableAll\" qaTag=\"select-all-checkbox\" class=\"st-table__checkbox\" name=\"selectAll\"\n                [checked]=\"selectedAll\" (change)=\"onSelectAll($event)\">\n            </st-checkbox>\n            <label class='st-table__header-text' (click)=\"onChangeOrder(field)\">\n               <i *ngIf=\"isSortedByField(field)\" class='st-table__order-arrow' [ngClass]=\"getHeaderItemClass(field)\">\n               </i>\n               {{field.label}}\n            </label>\n            <st-popover-filter *ngIf=\"isFilterable(field)\"\n               [field]=\"field\"\n               [index]=\"i\"\n               [templateContentFilter]=\"templateContentFilter\"\n               [filtered]=\"statusFilter[i]\"\n               [hidden]=\"visibleFilter !== i\"\n               [iconClasses]=\"iconClasses?.filter\"\n               (filter)=\"onSelectedFilters($event)\"\n               (click)=\"onClickPopover(i, field)\">\n            </st-popover-filter>\n         </th>\n         <th *ngIf=\"hasHoverMenu\"></th> <!-- For hover cell -->\n      </tr>\n   </thead>\n   <ng-content></ng-content>\n</table>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: ["@charset \"UTF-8\";.st-table{width:100%}.st-table__header-item{text-transform:capitalize;position:relative;vertical-align:bottom}.st-table__header-text{position:relative;height:100%;display:inline-flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start;cursor:inherit}"]
            }] }
];
/** @nocollapse */
StTableComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
StTableComponent.propDecorators = {
    fields: [{ type: Input }],
    qaTag: [{ type: Input }],
    header: [{ type: Input }],
    sortable: [{ type: Input }],
    filterable: [{ type: Input }],
    selectableAll: [{ type: Input }],
    currentOrder: [{ type: Input }],
    templateContentFilter: [{ type: Input }],
    statusFilter: [{ type: Input }],
    iconClasses: [{ type: Input }],
    fixedHeader: [{ type: Input }, { type: HostBinding, args: ['class.st-custom-scrollbar',] }, { type: HostBinding, args: ['class.fixed-header',] }],
    customClasses: [{ type: Input }],
    selectedAll: [{ type: Input }],
    hasHoverMenu: [{ type: Input }],
    changeOrder: [{ type: Output }],
    selectAll: [{ type: Output }],
    clickFilter: [{ type: Output }],
    selectFilters: [{ type: Output }]
};
tslib_1.__decorate([
    StRequired(),
    tslib_1.__metadata("design:type", Array)
], StTableComponent.prototype, "fields", void 0);
/**
 * \@description {Component} [Table]
 *
 * The table component has been designed to display any content like images, text, graphs, etc.
 *
 * * \@model
 *
 *   [StTableHeader] {./shared/table-header.interface.ts#StTableHeader}
 *   [StDynamicTableHeader] {./shared/table-header.interface.ts#StFilterElement}
 *   [StFilterHeader] {./shared/table-header.interface.ts#StFilterHeader}
 *   [StTableFilterIconClasses] {./st-table.interface.ts#StTableFilterIconClasses}
 *   [StTableIconClasses] {./st-table.interface.ts#StTableIconClasses}
 *
 * \@example
 *
 * {html}
 *
 * ```
 * <st-table [fields]="fields" [sortable]="true" (changeOrder)="yourFunctionToOrder($event)">
 * <tr st-table-row *ngFor="let userData of data">
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.id}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.name}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.lastName}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.phone}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.company}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.completedProfile}}</label>
 * </td>
 * <td st-table-row-hover>
 *    <i class="icon icon-arrow2_right"></i>
 * </td>
 * </tr>
 * </st-table>
 * ```
 *
 */
StTableComponent = tslib_1.__decorate([
    StEgeo(),
    tslib_1.__metadata("design:paramtypes", [ChangeDetectorRef])
], StTableComponent);
export { StTableComponent };
if (false) {
    /**
     * \@Input {StTableHeader[]} [fields=''] List of field displayed in the header
     * @type {?}
     */
    StTableComponent.prototype.fields;
    /**
     * \@Input {string} [qaTag=''] Prefix used to generate the id values for qa tests
     * @type {?}
     */
    StTableComponent.prototype.qaTag;
    /**
     * \@Input {boolean} [header=true] Boolean to show or hide the header
     * @type {?}
     */
    StTableComponent.prototype.header;
    /**
     * \@Input {boolean} [sortable=true] Boolean to make sortable the table, To enable sorting of columns use
     * the new "sortable" field inside stTableHeader model
     * @type {?}
     */
    StTableComponent.prototype.sortable;
    /**
     * \@Input {boolean} [filterable=true] Boolean to make filterable the table, To enable filtering of columns use
     * the new "filterable" field inside stTableHeader model (necesary define filterConfig).
     * @type {?}
     */
    StTableComponent.prototype.filterable;
    /**
     * \@Input {boolean} [selectableAll=false] Boolean to show or hide a checkbox in the header to select or
     *  deselect all rows
     * @type {?}
     */
    StTableComponent.prototype.selectableAll;
    /**
     * \@Input {Order} [currentOrder=''] It specifies what is the current order applied to the table
     * @type {?}
     */
    StTableComponent.prototype.currentOrder;
    /**
     * \@Input {TemplateRef} [templateContentFilter=undefined] Reference to paint a custom template inside popover content
     * @type {?}
     */
    StTableComponent.prototype.templateContentFilter;
    /**
     * \@Input {boolean[]} [statusFilter=''] List of status filter by column, needed with templateContentFilter
     * @type {?}
     */
    StTableComponent.prototype.statusFilter;
    /**
     * \@Input {StTableIconClasses} [iconClasses=''] List of icon classes
     * @type {?}
     */
    StTableComponent.prototype.iconClasses;
    /**
     * \@Output {Order} [changeOrder=''] Event emitted with the new order which has to be applied to the table rows
     * @type {?}
     */
    StTableComponent.prototype.changeOrder;
    /**
     * \@Output {boolean} [selectAll=''] Event emitted when user interacts with the checkbox to select or deselect
     * all rows
     * @type {?}
     */
    StTableComponent.prototype.selectAll;
    /**
     * \@Output {string} [clickFilter=] Event emitted when clicking on filters icon
     * @type {?}
     */
    StTableComponent.prototype.clickFilter;
    /**
     * \@Output {StTableHeader[]} [selectFilters=''] Event emitted  when user interacts with filter button without a custom template
     * @type {?}
     */
    StTableComponent.prototype.selectFilters;
    /** @type {?} */
    StTableComponent.prototype.tableClasses;
    /** @type {?} */
    StTableComponent.prototype.orderTypes;
    /** @type {?} */
    StTableComponent.prototype.visibleFilter;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._fixedHeader;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._selectedAll;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._hasHoverMenu;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._customClasses;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3QtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHN0cmF0aW8vZWdlby8iLCJzb3VyY2VzIjpbImxpYi9zdC10YWJsZS9zdC10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQVVBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNKLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDdEUsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRCxPQUFPLEVBQUUsU0FBUyxJQUFJLFVBQVUsRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzlELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXdEN0MsZ0JBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01BQWhCLGdCQUFnQjs7OztJQXFHMUIsWUFBb0IsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7Ozs7UUEvRmpDLFdBQU0sR0FBWSxJQUFJLENBQUM7Ozs7O1FBS3ZCLGFBQVEsR0FBWSxJQUFJLENBQUM7Ozs7O1FBS3pCLGVBQVUsR0FBWSxLQUFLLENBQUM7Ozs7O1FBSzVCLGtCQUFhLEdBQVksS0FBSyxDQUFDOzs7O1FBVS9CLGdCQUFXLEdBQXdCLElBQUksa0JBQWtCLEVBQUUsQ0FBQzs7OztRQWlEM0QsZ0JBQVcsR0FBd0IsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7Ozs7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RXhDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOzthQUNqRDs7OztZQTVEaUMsaUJBQWlCOzs7cUJBZ0UvQyxLQUFLO29CQUVMLEtBQUs7cUJBRUwsS0FBSzt1QkFLTCxLQUFLO3lCQUtMLEtBQUs7NEJBS0wsS0FBSzsyQkFHTCxLQUFLO29DQUdMLEtBQUs7MkJBRUwsS0FBSzswQkFFTCxLQUFLOzBCQUdMLEtBQUssWUFDTCxXQUFXLFNBQUMsMkJBQTJCLGNBQ3ZDLFdBQVcsU0FBQyxvQkFBb0I7NEJBU2hDLEtBQUs7MEJBWUwsS0FBSzsyQkFhTCxLQUFLOzBCQVVMLE1BQU07d0JBSU4sTUFBTTswQkFHTixNQUFNOzRCQUdOLE1BQU07O0FBeEZnQjtJQUFiLFVBQVUsRUFBRTs7Z0RBQXlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUZyQyxnQkFBZ0I7SUFSNUIsTUFBTSxFQUFFOzZDQTZHbUIsaUJBQWlCO0dBckdoQyxnQkFBZ0IsQ0FpTDVCO1NBakxZLGdCQUFnQjs7Ozs7O0lBRTFCLGtDQUErQzs7Ozs7SUFFL0MsaUNBQXVCOzs7OztJQUV2QixrQ0FBZ0M7Ozs7OztJQUtoQyxvQ0FBa0M7Ozs7OztJQUtsQyxzQ0FBcUM7Ozs7OztJQUtyQyx5Q0FBd0M7Ozs7O0lBR3hDLHdDQUE2Qjs7Ozs7SUFHN0IsaURBQWtEOzs7OztJQUVsRCx3Q0FBa0M7Ozs7O0lBRWxDLHVDQUFxRTs7Ozs7SUFpRHJFLHVDQUFnRTs7Ozs7O0lBSWhFLHFDQUFnRTs7Ozs7SUFHaEUsdUNBQXdFOzs7OztJQUd4RSx5Q0FBNEU7O0lBRTVFLHdDQUE4Qjs7SUFDOUIsc0NBQW9DOztJQUNwQyx5Q0FBa0M7Ozs7O0lBRWxDLHdDQUFzQzs7Ozs7SUFDdEMsd0NBQThCOzs7OztJQUM5Qix5Q0FBdUM7Ozs7O0lBQ3ZDLDBDQUErQjs7Ozs7SUFFbkIsK0JBQThCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIMKpIDIwMTcgU3RyYXRpbyBCaWcgRGF0YSBJbmMuLCBTdWN1cnNhbCBlbiBFc3Bhw7FhLlxuICpcbiAqIFRoaXMgc29mdHdhcmUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC5cbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7XG4gKiB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLlxuICogU2VlIHRoZSB0ZXJtcyBvZiB0aGUgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wLlxuICovXG5pbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFRlbXBsYXRlUmVmLCBIb3N0QmluZGluZywgSG9zdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBTdEVnZW8sIFN0UmVxdWlyZWQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL3JlcXVpcmUtZGVjb3JhdG9ycyc7XG5pbXBvcnQgeyBPcmRlciwgT1JERVJfVFlQRSB9IGZyb20gJy4vc2hhcmVkL29yZGVyJztcbmltcG9ydCB7IFN0VGFibGVIZWFkZXIgfSBmcm9tICcuL3NoYXJlZC90YWJsZS1oZWFkZXIuaW50ZXJmYWNlJztcbmltcG9ydCB7IGNsb25lRGVlcCBhcyBfY2xvbmVEZWVwLCBnZXQgYXMgX2dldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBTdFRhYmxlSWNvbkNsYXNzZXMgfSBmcm9tICcuL3N0LXRhYmxlLmludGVyZmFjZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIHtDb21wb25lbnR9IFtUYWJsZV1cbiAqXG4gKiBUaGUgdGFibGUgY29tcG9uZW50IGhhcyBiZWVuIGRlc2lnbmVkIHRvIGRpc3BsYXkgYW55IGNvbnRlbnQgbGlrZSBpbWFnZXMsIHRleHQsIGdyYXBocywgZXRjLlxuICpcbiAqICogQG1vZGVsXG4gKlxuICogICBbU3RUYWJsZUhlYWRlcl0gey4vc2hhcmVkL3RhYmxlLWhlYWRlci5pbnRlcmZhY2UudHMjU3RUYWJsZUhlYWRlcn1cbiAqICAgW1N0RHluYW1pY1RhYmxlSGVhZGVyXSB7Li9zaGFyZWQvdGFibGUtaGVhZGVyLmludGVyZmFjZS50cyNTdEZpbHRlckVsZW1lbnR9XG4gKiAgIFtTdEZpbHRlckhlYWRlcl0gey4vc2hhcmVkL3RhYmxlLWhlYWRlci5pbnRlcmZhY2UudHMjU3RGaWx0ZXJIZWFkZXJ9XG4gKiAgIFtTdFRhYmxlRmlsdGVySWNvbkNsYXNzZXNdIHsuL3N0LXRhYmxlLmludGVyZmFjZS50cyNTdFRhYmxlRmlsdGVySWNvbkNsYXNzZXN9XG4gKiAgIFtTdFRhYmxlSWNvbkNsYXNzZXNdIHsuL3N0LXRhYmxlLmludGVyZmFjZS50cyNTdFRhYmxlSWNvbkNsYXNzZXN9XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiB7aHRtbH1cbiAqXG4gKiBgYGBcbiAqIDxzdC10YWJsZSBbZmllbGRzXT1cImZpZWxkc1wiIFtzb3J0YWJsZV09XCJ0cnVlXCIgKGNoYW5nZU9yZGVyKT1cInlvdXJGdW5jdGlvblRvT3JkZXIoJGV2ZW50KVwiPlxuICogPHRyIHN0LXRhYmxlLXJvdyAqbmdGb3I9XCJsZXQgdXNlckRhdGEgb2YgZGF0YVwiPlxuICogPHRkIHN0LXRhYmxlLWNlbGwgc3QtdGFibGUtcm93LWNvbnRlbnQ+XG4gKiAgICA8bGFiZWwgPnt7dXNlckRhdGEuaWR9fTwvbGFiZWw+XG4gKiA8L3RkPlxuICogPHRkIHN0LXRhYmxlLWNlbGwgc3QtdGFibGUtcm93LWNvbnRlbnQ+XG4gKiAgICA8bGFiZWwgPnt7dXNlckRhdGEubmFtZX19PC9sYWJlbD5cbiAqIDwvdGQ+XG4gKiA8dGQgc3QtdGFibGUtY2VsbCBzdC10YWJsZS1yb3ctY29udGVudD5cbiAqICAgIDxsYWJlbCA+e3t1c2VyRGF0YS5sYXN0TmFtZX19PC9sYWJlbD5cbiAqIDwvdGQ+XG4gKiA8dGQgc3QtdGFibGUtY2VsbCBzdC10YWJsZS1yb3ctY29udGVudD5cbiAqICAgIDxsYWJlbCA+e3t1c2VyRGF0YS5waG9uZX19PC9sYWJlbD5cbiAqIDwvdGQ+XG4gKiA8dGQgc3QtdGFibGUtY2VsbCBzdC10YWJsZS1yb3ctY29udGVudD5cbiAqICAgIDxsYWJlbCA+e3t1c2VyRGF0YS5jb21wYW55fX08L2xhYmVsPlxuICogPC90ZD5cbiAqIDx0ZCBzdC10YWJsZS1jZWxsIHN0LXRhYmxlLXJvdy1jb250ZW50PlxuICogICAgPGxhYmVsID57e3VzZXJEYXRhLmNvbXBsZXRlZFByb2ZpbGV9fTwvbGFiZWw+XG4gKiA8L3RkPlxuICogPHRkIHN0LXRhYmxlLXJvdy1ob3Zlcj5cbiAqICAgIDxpIGNsYXNzPVwiaWNvbiBpY29uLWFycm93Ml9yaWdodFwiPjwvaT5cbiAqIDwvdGQ+XG4gKiA8L3RyPlxuICogPC9zdC10YWJsZT5cbiAqIGBgYFxuICpcbiAqL1xuQFN0RWdlbygpXG5AQ29tcG9uZW50KHtcbiAgIHNlbGVjdG9yOiAnc3QtdGFibGUnLFxuICAgdGVtcGxhdGVVcmw6ICcuL3N0LXRhYmxlLmNvbXBvbmVudC5odG1sJyxcbiAgIHN0eWxlVXJsczogWycuL3N0LXRhYmxlLmNvbXBvbmVudC5zY3NzJ10sXG4gICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcblxuZXhwb3J0IGNsYXNzIFN0VGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgLyoqIEBJbnB1dCB7U3RUYWJsZUhlYWRlcltdfSBbZmllbGRzPScnXSBMaXN0IG9mIGZpZWxkIGRpc3BsYXllZCBpbiB0aGUgaGVhZGVyICovXG4gICBASW5wdXQoKSBAU3RSZXF1aXJlZCgpIGZpZWxkczogU3RUYWJsZUhlYWRlcltdO1xuICAgLyoqIEBJbnB1dCB7c3RyaW5nfSBbcWFUYWc9JyddIFByZWZpeCB1c2VkIHRvIGdlbmVyYXRlIHRoZSBpZCB2YWx1ZXMgZm9yIHFhIHRlc3RzICovXG4gICBASW5wdXQoKSBxYVRhZzogc3RyaW5nO1xuICAgLyoqIEBJbnB1dCB7Ym9vbGVhbn0gW2hlYWRlcj10cnVlXSBCb29sZWFuIHRvIHNob3cgb3IgaGlkZSB0aGUgaGVhZGVyICovXG4gICBASW5wdXQoKSBoZWFkZXI6IGJvb2xlYW4gPSB0cnVlO1xuICAgLyoqXG4gICAgKiBASW5wdXQge2Jvb2xlYW59IFtzb3J0YWJsZT10cnVlXSBCb29sZWFuIHRvIG1ha2Ugc29ydGFibGUgdGhlIHRhYmxlLCBUbyBlbmFibGUgc29ydGluZyBvZiBjb2x1bW5zIHVzZVxuICAgICogdGhlIG5ldyBcInNvcnRhYmxlXCIgZmllbGQgaW5zaWRlIHN0VGFibGVIZWFkZXIgbW9kZWxcbiAgICAqL1xuICAgQElucHV0KCkgc29ydGFibGU6IGJvb2xlYW4gPSB0cnVlO1xuICAgLyoqXG4gICAgKiBASW5wdXQge2Jvb2xlYW59IFtmaWx0ZXJhYmxlPXRydWVdIEJvb2xlYW4gdG8gbWFrZSBmaWx0ZXJhYmxlIHRoZSB0YWJsZSwgVG8gZW5hYmxlIGZpbHRlcmluZyBvZiBjb2x1bW5zIHVzZVxuICAgICogdGhlIG5ldyBcImZpbHRlcmFibGVcIiBmaWVsZCBpbnNpZGUgc3RUYWJsZUhlYWRlciBtb2RlbCAobmVjZXNhcnkgZGVmaW5lIGZpbHRlckNvbmZpZykuXG4gICAgKi9cbiAgIEBJbnB1dCgpIGZpbHRlcmFibGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIC8qKlxuICAgICogQElucHV0IHtib29sZWFufSBbc2VsZWN0YWJsZUFsbD1mYWxzZV0gQm9vbGVhbiB0byBzaG93IG9yIGhpZGUgYSBjaGVja2JveCBpbiB0aGUgaGVhZGVyIHRvIHNlbGVjdCBvclxuICAgICogIGRlc2VsZWN0IGFsbCByb3dzXG4gICAgKi9cbiAgIEBJbnB1dCgpIHNlbGVjdGFibGVBbGw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgLyoqIEBJbnB1dCB7T3JkZXJ9IFtjdXJyZW50T3JkZXI9JyddIEl0IHNwZWNpZmllcyB3aGF0IGlzIHRoZSBjdXJyZW50IG9yZGVyIGFwcGxpZWQgdG8gdGhlIHRhYmxlICovXG4gICBASW5wdXQoKSBjdXJyZW50T3JkZXI6IE9yZGVyO1xuXG4gICAvKiogQElucHV0IHtUZW1wbGF0ZVJlZn0gW3RlbXBsYXRlQ29udGVudEZpbHRlcj11bmRlZmluZWRdIFJlZmVyZW5jZSB0byBwYWludCBhIGN1c3RvbSB0ZW1wbGF0ZSBpbnNpZGUgcG9wb3ZlciBjb250ZW50ICovXG4gICBASW5wdXQoKSB0ZW1wbGF0ZUNvbnRlbnRGaWx0ZXI/OiBUZW1wbGF0ZVJlZjxhbnk+O1xuICAgLyoqIEBJbnB1dCB7Ym9vbGVhbltdfSBbc3RhdHVzRmlsdGVyPScnXSBMaXN0IG9mIHN0YXR1cyBmaWx0ZXIgYnkgY29sdW1uLCBuZWVkZWQgd2l0aCB0ZW1wbGF0ZUNvbnRlbnRGaWx0ZXIgKi9cbiAgIEBJbnB1dCgpIHN0YXR1c0ZpbHRlcj86IGJvb2xlYW5bXTtcbiAgIC8qKiBASW5wdXQge1N0VGFibGVJY29uQ2xhc3Nlc30gW2ljb25DbGFzc2VzPScnXSBMaXN0IG9mIGljb24gY2xhc3NlcyAqL1xuICAgQElucHV0KCkgaWNvbkNsYXNzZXM/OiBTdFRhYmxlSWNvbkNsYXNzZXMgPSBuZXcgU3RUYWJsZUljb25DbGFzc2VzKCk7XG5cbiAgIC8qKiBASW5wdXQge2Jvb2xlYW59IFtmaXhlZEhlYWRlcj1mYWxzZV0gQm9vbGVhbiB0byBmaXggdGhlIHRhYmxlIGhlYWRlciAqL1xuICAgQElucHV0KClcbiAgIEBIb3N0QmluZGluZygnY2xhc3Muc3QtY3VzdG9tLXNjcm9sbGJhcicpXG4gICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZpeGVkLWhlYWRlcicpXG4gICBnZXQgZml4ZWRIZWFkZXIoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5fZml4ZWRIZWFkZXI7XG4gICB9XG4gICBzZXQgZml4ZWRIZWFkZXIobmV3VmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgIHRoaXMuX2ZpeGVkSGVhZGVyID0gbmV3VmFsdWU7XG4gICB9XG5cbiAgIC8qKiBASW5wdXQge3N0cmluZ30gW2N1c3RvbUNsYXNzZXM9XSBDbGFzc2VzIGZvciBhZGRpbmcgc3R5bGVzIHRvIHRhYmxlIHRhZyBmcm9tIG91dHNpZGUuIFRoZXNlIGNhbiBiZTogc2VwYXJhdGVkLXJvd3MgKi9cbiAgIEBJbnB1dCgpXG4gICBnZXQgY3VzdG9tQ2xhc3NlcygpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUNsYXNzZXM7XG4gICB9XG5cbiAgIHNldCBjdXN0b21DbGFzc2VzKG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAgIHRoaXMudGFibGVDbGFzc2VzW3RoaXMuX2N1c3RvbUNsYXNzZXNdID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY3VzdG9tQ2xhc3NlcyA9IG5ld1ZhbHVlO1xuICAgICAgdGhpcy50YWJsZUNsYXNzZXNbdGhpcy5fY3VzdG9tQ2xhc3Nlc10gPSB0aGlzLl9jdXN0b21DbGFzc2VzO1xuICAgfVxuXG4gICAvKiogQElucHV0IHtib29sZWFufSBbc2VsZWN0ZWRBbGw9ZmFsc2VdIEl0IHNwZWNpZmllcyBpZiBhbGwgcm93cyBhcmUgc2VsZWN0ZWQgKi9cbiAgIEBJbnB1dCgpXG4gICBnZXQgc2VsZWN0ZWRBbGwoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRBbGw7XG4gICB9XG5cbiAgIHNldCBzZWxlY3RlZEFsbChuZXdWYWx1ZTogYm9vbGVhbikge1xuICAgICAgdGhpcy5fc2VsZWN0ZWRBbGwgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMuX2NkLm1hcmtGb3JDaGVjaygpO1xuICAgfVxuXG4gICAvKiogQElucHV0IHtib29sZWFufSBbaGFzSG92ZXJNZW51PWZhbHNlXSBJdCBzcGVjaWZpZXMgaWYgYSBtZW51IGhhcyB0byBiZSBkaXNwbGF5ZWQgd2hlbiB1c2VyIHB1dHMgdGhlIG1vdXNlIG92ZXJcbiAgICAqIHRoZSByb3dzLiBSZW1lbWJlciB0byBhZGQgYSBjZWxsIHdpdGggdGhlIHNlbGVjdG9yIHN0LXRhYmxlLXJvdy1ob3ZlciBmb3IgYWRkaW5nIGNvbnRlbnQgdG8gdGhlIG1lbnVcbiAgICAqL1xuICAgQElucHV0KClcbiAgIGdldCBoYXNIb3Zlck1lbnUoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzSG92ZXJNZW51O1xuICAgfVxuXG4gICBzZXQgaGFzSG92ZXJNZW51KG5ld1ZhbHVlOiBib29sZWFuKSB7XG4gICAgICB0aGlzLl9oYXNIb3Zlck1lbnUgPSBuZXdWYWx1ZTtcbiAgIH1cblxuICAgLyoqIEBPdXRwdXQge09yZGVyfSBbY2hhbmdlT3JkZXI9JyddIEV2ZW50IGVtaXR0ZWQgd2l0aCB0aGUgbmV3IG9yZGVyIHdoaWNoIGhhcyB0byBiZSBhcHBsaWVkIHRvIHRoZSB0YWJsZSByb3dzICovXG4gICBAT3V0cHV0KCkgY2hhbmdlT3JkZXI6IEV2ZW50RW1pdHRlcjxPcmRlcj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAvKiogQE91dHB1dCB7Ym9vbGVhbn0gW3NlbGVjdEFsbD0nJ10gRXZlbnQgZW1pdHRlZCB3aGVuIHVzZXIgaW50ZXJhY3RzIHdpdGggdGhlIGNoZWNrYm94IHRvIHNlbGVjdCBvciBkZXNlbGVjdFxuICAgICogYWxsIHJvd3NcbiAgICAqL1xuICAgQE91dHB1dCgpIHNlbGVjdEFsbDogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAvKiogQE91dHB1dCB7c3RyaW5nfSBbY2xpY2tGaWx0ZXI9XSBFdmVudCBlbWl0dGVkIHdoZW4gY2xpY2tpbmcgb24gZmlsdGVycyBpY29uICAqL1xuICAgQE91dHB1dCgpIGNsaWNrRmlsdGVyOiBFdmVudEVtaXR0ZXI8U3RUYWJsZUhlYWRlcj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgIC8qKiBAT3V0cHV0IHtTdFRhYmxlSGVhZGVyW119IFtzZWxlY3RGaWx0ZXJzPScnXSBFdmVudCBlbWl0dGVkICB3aGVuIHVzZXIgaW50ZXJhY3RzIHdpdGggZmlsdGVyIGJ1dHRvbiB3aXRob3V0IGEgY3VzdG9tIHRlbXBsYXRlICovXG4gICBAT3V0cHV0KCkgc2VsZWN0RmlsdGVyczogRXZlbnRFbWl0dGVyPFN0VGFibGVIZWFkZXJbXT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgIHB1YmxpYyB0YWJsZUNsYXNzZXM6IGFueSA9IHt9O1xuICAgcHVibGljIG9yZGVyVHlwZXM6IGFueSA9IE9SREVSX1RZUEU7XG4gICBwdWJsaWMgdmlzaWJsZUZpbHRlcjogbnVtYmVyID0gLTE7XG5cbiAgIHByaXZhdGUgX2ZpeGVkSGVhZGVyOiBib29sZWFuID0gZmFsc2U7XG4gICBwcml2YXRlIF9zZWxlY3RlZEFsbDogYm9vbGVhbjtcbiAgIHByaXZhdGUgX2hhc0hvdmVyTWVudTogYm9vbGVhbiA9IGZhbHNlO1xuICAgcHJpdmF0ZSBfY3VzdG9tQ2xhc3Nlczogc3RyaW5nO1xuXG4gICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jZDogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgIH1cblxuICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJhYmxlICYmICF0aGlzLnN0YXR1c0ZpbHRlcikge1xuICAgICAgICAgdGhpcy5zdGF0dXNGaWx0ZXIgPSBuZXcgQXJyYXkodGhpcy5maWVsZHMubGVuZ3RoKTtcbiAgICAgICAgIHRoaXMuc3RhdHVzRmlsdGVyLmZpbGwoZmFsc2UpO1xuICAgICAgfVxuICAgfVxuXG4gICBwdWJsaWMgZ2V0SGVhZGVySXRlbUNsYXNzKGZpZWxkOiBTdFRhYmxlSGVhZGVyKTogc3RyaW5nIHtcbiAgICAgIGxldCBpc09yZGVyQXNjID0gdGhpcy5pc1NvcnRlZEJ5RmllbGRBbmREaXJlY3Rpb24oZmllbGQsIHRoaXMub3JkZXJUeXBlcy5BU0MpO1xuICAgICAgcmV0dXJuIGlzT3JkZXJBc2MgPyB0aGlzLmljb25DbGFzc2VzLnNvcnQuYXNjIDogdGhpcy5pY29uQ2xhc3Nlcy5zb3J0LmRlc2M7XG4gICB9XG5cbiAgIHB1YmxpYyBpc1NvcnRhYmxlKGZpZWxkOiBTdFRhYmxlSGVhZGVyKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmllbGQgJiYgZmllbGQuc29ydGFibGUgIT09IHVuZGVmaW5lZCA/IGZpZWxkLnNvcnRhYmxlIDogdGhpcy5zb3J0YWJsZTtcbiAgIH1cblxuICAgcHVibGljIGlzU29ydGVkQnlGaWVsZChmaWVsZDogU3RUYWJsZUhlYWRlcik6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE9yZGVyICYmIHRoaXMuY3VycmVudE9yZGVyLm9yZGVyQnkgPT09IGZpZWxkLmlkO1xuICAgfVxuXG4gICBwdWJsaWMgaXNGaWx0ZXJhYmxlKGZpZWxkOiBTdFRhYmxlSGVhZGVyKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXJhYmxlICYmIChfZ2V0KGZpZWxkLCAnZmlsdGVycy5maWx0ZXJDb25maWcnKSkgfHxcbiAgICAgICAgICAgICh0aGlzLnRlbXBsYXRlQ29udGVudEZpbHRlciAmJiBfZ2V0KGZpZWxkLCAnZmlsdGVycycpKSB8fFxuICAgICAgICAgICAgX2dldChmaWVsZCwgJ2ZpbHRlcnMudGVtcGxhdGVSZWYnKTtcbiAgIH1cblxuICAgcHVibGljIG9uQ2xpY2tQb3BvdmVyKGluZGV4OiBudW1iZXIsIGZpZWxkOiBTdFRhYmxlSGVhZGVyKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy52aXNpYmxlRmlsdGVyID09PSBpbmRleCkge1xuICAgICAgICAgdGhpcy52aXNpYmxlRmlsdGVyID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgdGhpcy52aXNpYmxlRmlsdGVyID0gaW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLmNsaWNrRmlsdGVyLmVtaXQoZmllbGQpO1xuICAgICAgdGhpcy5fY2QubWFya0ZvckNoZWNrKCk7XG4gICB9XG5cbiAgIHB1YmxpYyBvbkNoYW5nZU9yZGVyKGZpZWxkOiBTdFRhYmxlSGVhZGVyKTogdm9pZCB7XG4gICAgICBsZXQgX2N1cnJlbnRPcmRlcjogT3JkZXI7XG4gICAgICBpZiAoZmllbGQgJiYgdGhpcy5pc1NvcnRhYmxlKGZpZWxkKSkge1xuICAgICAgICAgaWYgKHRoaXMuY3VycmVudE9yZGVyICYmIHRoaXMuY3VycmVudE9yZGVyLm9yZGVyQnkgPT09IGZpZWxkLmlkKSB7XG4gICAgICAgICAgICBfY3VycmVudE9yZGVyID0gdGhpcy5jaGFuZ2VPcmRlckRpcmVjdGlvbigpO1xuICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9jdXJyZW50T3JkZXIgPSBuZXcgT3JkZXIoZmllbGQuaWQsIE9SREVSX1RZUEUuQVNDKTtcbiAgICAgICAgIH1cbiAgICAgICAgIHRoaXMuY2hhbmdlT3JkZXIuZW1pdChfY3VycmVudE9yZGVyKTtcbiAgICAgIH1cbiAgIH1cblxuICAgcHVibGljIG9uU2VsZWN0QWxsKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgIHRoaXMuc2VsZWN0QWxsLmVtaXQoZXZlbnQuY2hlY2tlZCk7XG4gICB9XG5cbiAgIHB1YmxpYyBvblNlbGVjdGVkRmlsdGVycyhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAgIGxldCBzZWxlY3RlZEZpbHRlcnMgPSBfY2xvbmVEZWVwKHRoaXMuZmllbGRzKTtcbiAgICAgIHNlbGVjdGVkRmlsdGVycyA9IHNlbGVjdGVkRmlsdGVycy5maWx0ZXIoKGZpZWxkKSA9PiB7XG4gICAgICAgICBpZiAoX2dldChmaWVsZCwgJ2ZpbHRlcnMuZmlsdGVyQ29uZmlnJykpIHtcbiAgICAgICAgICAgIGZpZWxkLmZpbHRlcnMuZmlsdGVyQ29uZmlnID0gZmllbGQuZmlsdGVycy5maWx0ZXJDb25maWcuZmlsdGVyKChjb25mKSA9PiBjb25mLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIGlmIChmaWVsZC5maWx0ZXJzLmZpbHRlckNvbmZpZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2VsZWN0RmlsdGVycy5lbWl0KHNlbGVjdGVkRmlsdGVycyk7XG4gICB9XG5cbiAgIHByaXZhdGUgY2hhbmdlT3JkZXJEaXJlY3Rpb24oKTogT3JkZXIge1xuICAgICAgbGV0IG5ld0RpcmVjdGlvbiA9IHRoaXMuY3VycmVudE9yZGVyLnR5cGUgPT09IE9SREVSX1RZUEUuQVNDID8gT1JERVJfVFlQRS5ERVNDIDogT1JERVJfVFlQRS5BU0M7XG4gICAgICByZXR1cm4gbmV3IE9yZGVyKHRoaXMuY3VycmVudE9yZGVyLm9yZGVyQnksIG5ld0RpcmVjdGlvbik7XG4gICB9XG5cbiAgIHByaXZhdGUgaXNTb3J0ZWRCeUZpZWxkQW5kRGlyZWN0aW9uKGZpZWxkOiBTdFRhYmxlSGVhZGVyLCBvcmRlclR5cGU6IE9SREVSX1RZUEUpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmlzU29ydGVkQnlGaWVsZChmaWVsZCkgJiYgdGhpcy5jdXJyZW50T3JkZXIudHlwZSA9PT0gb3JkZXJUeXBlO1xuICAgfVxufVxuIl19