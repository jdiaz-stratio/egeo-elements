/**
 * @fileoverview added by tsickle
 * Generated from: lib/st-form/st-form-field/st-form-field.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * © 2017 Stratio Big Data Inc., Sucursal en España.
 *
 * This software is licensed under the Apache License, Version 2.0.
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the terms of the License for more details.
 *
 * SPDX-License-Identifier: Apache-2.0.
 */
import { ChangeDetectionStrategy, Component, EventEmitter, forwardRef, HostBinding, Input, Output, ViewChild } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR, NgModel } from '@angular/forms';
import { StEgeo, StRequired } from '../../decorators/require-decorators';
var StFormFieldComponent = /** @class */ (function () {
    function StFormFieldComponent() {
        this.required = false;
        this.showTooltip = true;
        // number of characters from witch inputs will be displayed as textarea
        this.valueChange = new EventEmitter();
        this.blur = new EventEmitter();
        this.disabled = false; // To check disable
        // To check disable
        this.focus = false;
        this.errorMessage = undefined;
        this._defaultErrorMessages = {
            generic: 'Error',
            required: 'This field is required',
            minLength: 'The field min length is ',
            maxLength: 'The field max length is ',
            min: 'The number has to be higher than ',
            max: 'The number has to be minor than ',
            pattern: 'Invalid value'
        };
        this.onChange = (/**
         * @param {?} _
         * @return {?}
         */
        function (_) {
        });
        this.onTouched = (/**
         * @return {?}
         */
        function () {
        });
    }
    StFormFieldComponent_1 = StFormFieldComponent;
    Object.defineProperty(StFormFieldComponent.prototype, "readOnly", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema && this.schema.value && this.schema.value.readOnly === true;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} value
     * @return {?}
     */
    StFormFieldComponent.prototype.setValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.onChange(value);
        this.valueChange.emit(value);
    };
    /**
     * @param {?} control
     * @return {?}
     */
    StFormFieldComponent.prototype.validate = /**
     * @param {?} control
     * @return {?}
     */
    function (control) {
        if (this.templateModel && this.templateModel.control && this.templateModel.control.validator) {
            return this.templateModel.control.validator(control);
        }
    };
    /**
     * @return {?}
     */
    StFormFieldComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.schema.value && this.schema.value.enum) {
            this.selectOptions = this.getSelectOptions();
        }
        this._loadErrorMessages();
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.default !== undefined && (_this.innerValue === undefined || _this.innerValue === null)) {
                _this.innerValue = _this.default;
                _this.onChange(_this.innerValue);
            }
            if (_this.schema.value.readOnly) {
                _this.setDisabledState(true);
            }
        }));
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    StFormFieldComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.schema) {
            this.selectOptions = this.getSelectOptions();
        }
    };
    Object.defineProperty(StFormFieldComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.schema.value.type) {
                case 'string':
                    if (!this.schema.value.enum) {
                        return 'text';
                    }
                    else {
                        return 'select';
                    }
                case 'integer':
                    return 'number';
                default:
                    return (/** @type {?} */ (this.schema.value.type));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "min", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.exclusiveMinimum ? this.schema.value.minimum + this.getInputStep() : this.schema.value.minimum;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "max", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.exclusiveMaximum ? this.schema.value.maximum - this.getInputStep() : this.schema.value.maximum;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "label", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.title;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "placeholder", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.examples && this.schema.value.examples[0] ? this.schema.value.examples[0] : '';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "default", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.default;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "description", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.showTooltip) {
                return this.schema.value.description;
            }
            else {
                return undefined;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "minLength", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.minLength;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "maxLength", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.maxLength;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StFormFieldComponent.prototype, "pattern", {
        get: /**
         * @return {?}
         */
        function () {
            return this.schema.value.pattern;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} type
     * @return {?}
     */
    StFormFieldComponent.prototype.hasType = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        switch (type) {
            case 'input':
                return this.type === 'text' || this.type === 'number' || this.type === 'integer';
            case 'switch':
                return this.type === 'boolean' && this.hasDependencies;
            case 'checkbox':
                return this.type === 'boolean' && !this.hasDependencies;
            default:
                return this.type === type;
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    StFormFieldComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.innerValue = value;
        this.valueChange.emit(value);
        this.onChange(value);
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    StFormFieldComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    StFormFieldComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} disable
     * @return {?}
     */
    StFormFieldComponent.prototype.setDisabledState = /**
     * @param {?} disable
     * @return {?}
     */
    function (disable) {
        if (this.templateModel && this.templateModel.control) {
            if (disable) {
                this.templateModel.control.disable();
            }
            else {
                this.templateModel.control.enable();
            }
        }
    };
    /**
     * @return {?}
     */
    StFormFieldComponent.prototype.getInputStep = /**
     * @return {?}
     */
    function () {
        if (this.schema.value.type === 'number') {
            return 0.1;
        }
        else {
            return 1;
        }
    };
    /**
     * @return {?}
     */
    StFormFieldComponent.prototype.getSelectOptions = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var options = [];
        if (this.schema.value.enum) {
            options.push((/** @type {?} */ ({ label: 'Select one option', value: undefined })));
            /** @type {?} */
            var enumValues = (/** @type {?} */ (this.schema.value.enum));
            enumValues.forEach((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                options.push((/** @type {?} */ ({ label: value, value: value })));
            }));
        }
        return options;
    };
    /**
     * @return {?}
     */
    StFormFieldComponent.prototype.onBlur = /**
     * @return {?}
     */
    function () {
        this.blur.emit();
    };
    /**
     * @private
     * @return {?}
     */
    StFormFieldComponent.prototype._loadErrorMessages = /**
     * @private
     * @return {?}
     */
    function () {
        this.errors = {
            required: (this.errorMessages && this.errorMessages.required) || this._defaultErrorMessages.required,
            pattern: (this.errorMessages && this.errorMessages.pattern) || this._defaultErrorMessages.pattern,
            generic: (this.errorMessages && this.errorMessages.generic) || this._defaultErrorMessages.generic,
            minLength: ((this.errorMessages && this.errorMessages.minLength) || this._defaultErrorMessages.minLength) + this.schema.value.minLength,
            maxLength: ((this.errorMessages && this.errorMessages.maxLength) || this._defaultErrorMessages.maxLength) + this.schema.value.maxLength,
            min: ((this.errorMessages && this.errorMessages.min) || this._defaultErrorMessages.min) + (this.min - this.getInputStep()),
            max: ((this.errorMessages && this.errorMessages.max) || this._defaultErrorMessages.max) + (this.max + this.getInputStep())
        };
    };
    var StFormFieldComponent_1;
    StFormFieldComponent.decorators = [
        { type: Component, args: [{
                    selector: 'st-form-field',
                    template: "<!--\n\n    \u00A9 2017 Stratio Big Data Inc., Sucursal en Espa\u00F1a.\n\n    This software is licensed under the Apache License, Version 2.0.\n    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n    See the terms of the License for more details.\n\n    SPDX-License-Identifier: Apache-2.0.\n\n-->\n\n<st-input *ngIf=\"hasType('input') && (!maxWidth || (!maxLength || maxLength < maxWidth) && (!minLength || minLength < maxWidth))\"\n          #templateModel=\"ngModel\"\n          [forceValidations]=\"forceValidations\"\n          [fieldType]=\"type\"\n          [label]=\"label\"\n          [name]=\"schema.key\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"innerValue\"\n          (ngModelChange)=\"setValue($event)\"\n          [contextualHelp]=\"description\"\n          [errors]=\"errors\"\n          [default]=\"default\"\n          [max]=\"max\"\n          [min]=\"min\"\n          [minlength]=\"minLength\"\n          [maxlength]=\"maxLength\"\n          [required]=\"required\"\n          [pattern]=\"pattern\"\n          [step]=\"getInputStep()\"\n          [qaTag]=\"qaTag\"\n          (blur)=\"onBlur()\">\n</st-input>\n\n<st-textarea *ngIf=\"hasType('input') && maxWidth && (maxLength >= maxWidth || minLength >= maxWidth)\"\n          #templateModel=\"ngModel\"\n          [label]=\"label\"\n          [name]=\"schema.key\"\n          [default]=\"default\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"innerValue\"\n          (ngModelChange)=\"setValue($event)\"\n          [contextualHelp]=\"description\"\n          [errors]=\"errors\"\n          [minlength]=\"minLength\"\n          [maxlength]=\"maxLength\"\n          [required]=\"required\"\n          [pattern]=\"pattern\"\n          [qaTag]=\"qaTag\"\n          (blur)=\"onBlur()\">\n</st-textarea>\n\n<st-checkbox *ngIf=\"hasType('checkbox')\"\n             #templateModel=\"ngModel\"\n             [ngModel]=\"innerValue\"\n             (ngModelChange)=\"setValue($event)\"\n             [checked]=\"innerValue\"\n             [value]=\"innerValue\"\n             [name]=\"schema.key\"\n             [contextualHelp]=\"description\"\n             [qaTag]=\"qaTag\"><span>{{schema.value.title}}</span>\n</st-checkbox>\n\n<st-select *ngIf=\"hasType('select')\"\n           #templateModel=\"ngModel\"\n           [label]=\"label\"\n           [tooltip]=\"description\"\n           [name]=\"schema.key\"\n           [placeholder]=\"placeholder\"\n           [default]=\"default\"\n           [options]=\"selectOptions\"\n           [ngModel]=\"innerValue\"\n           (ngModelChange)=\"setValue($event)\"\n           [required]=\"required\"\n           [id]=\"qaTag\">\n</st-select>\n\n<st-switch *ngIf=\"hasType('switch')\"\n           #templateModel=\"ngModel\"\n           [label]=\"schema.value.title\"\n           [name]=\"schema.key\"\n           [contextualHelp]=\"description\"\n           [ngModel]=\"innerValue\"\n           (ngModelChange)=\"setValue($event)\"\n           [value]=\"innerValue\"\n           [qaTag]=\"schema.key\"\n           [id]=\"qaTag\">\n</st-switch>\n",
                    providers: [
                        { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return StFormFieldComponent_1; })), multi: true },
                        { provide: NG_VALIDATORS, useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return StFormFieldComponent_1; })), multi: true }
                    ],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    host: {
                        class: 'st-form-field'
                    },
                    styles: ["@charset \"UTF-8\";"]
                }] }
    ];
    StFormFieldComponent.propDecorators = {
        schema: [{ type: Input }],
        required: [{ type: Input }],
        errorMessages: [{ type: Input }],
        qaTag: [{ type: Input }],
        name: [{ type: Input }],
        value: [{ type: Input }],
        hasDependencies: [{ type: Input }],
        forceValidations: [{ type: Input }],
        showTooltip: [{ type: Input }],
        maxWidth: [{ type: Input }],
        valueChange: [{ type: Output }],
        blur: [{ type: Output }],
        templateModel: [{ type: ViewChild, args: ['templateModel', { static: false },] }],
        readOnly: [{ type: HostBinding, args: ['class.read-only',] }]
    };
    tslib_1.__decorate([
        StRequired(),
        tslib_1.__metadata("design:type", Object)
    ], StFormFieldComponent.prototype, "schema", void 0);
    StFormFieldComponent = StFormFieldComponent_1 = tslib_1.__decorate([
        StEgeo()
    ], StFormFieldComponent);
    return StFormFieldComponent;
}());
export { StFormFieldComponent };
if (false) {
    /** @type {?} */
    StFormFieldComponent.prototype.schema;
    /** @type {?} */
    StFormFieldComponent.prototype.required;
    /** @type {?} */
    StFormFieldComponent.prototype.errorMessages;
    /** @type {?} */
    StFormFieldComponent.prototype.qaTag;
    /** @type {?} */
    StFormFieldComponent.prototype.name;
    /** @type {?} */
    StFormFieldComponent.prototype.value;
    /** @type {?} */
    StFormFieldComponent.prototype.hasDependencies;
    /** @type {?} */
    StFormFieldComponent.prototype.forceValidations;
    /** @type {?} */
    StFormFieldComponent.prototype.showTooltip;
    /** @type {?} */
    StFormFieldComponent.prototype.maxWidth;
    /** @type {?} */
    StFormFieldComponent.prototype.valueChange;
    /** @type {?} */
    StFormFieldComponent.prototype.blur;
    /** @type {?} */
    StFormFieldComponent.prototype.templateModel;
    /** @type {?} */
    StFormFieldComponent.prototype.disabled;
    /** @type {?} */
    StFormFieldComponent.prototype.focus;
    /** @type {?} */
    StFormFieldComponent.prototype.errorMessage;
    /** @type {?} */
    StFormFieldComponent.prototype.selectOptions;
    /** @type {?} */
    StFormFieldComponent.prototype.innerValue;
    /** @type {?} */
    StFormFieldComponent.prototype.errors;
    /**
     * @type {?}
     * @private
     */
    StFormFieldComponent.prototype._defaultErrorMessages;
    /** @type {?} */
    StFormFieldComponent.prototype.onChange;
    /** @type {?} */
    StFormFieldComponent.prototype.onTouched;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3QtZm9ybS1maWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3RyYXRpby9lZ2VvLyIsInNvdXJjZXMiOlsibGliL3N0LWZvcm0vc3QtZm9ybS1maWVsZC9zdC1mb3JtLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBVUEsT0FBTyxFQUNKLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sRUFFTixTQUFTLEVBQ1gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFxQyxhQUFhLEVBQUUsaUJBQWlCLEVBQUUsT0FBTyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFOUcsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQzs7SUFJekU7UUFpQlksYUFBUSxHQUFZLEtBQUssQ0FBQztRQU8xQixnQkFBVyxHQUFZLElBQUksQ0FBQzs7UUFFM0IsZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUN6RCxTQUFJLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFHckQsYUFBUSxHQUFZLEtBQUssQ0FBQyxDQUFDLG1CQUFtQjs7UUFDOUMsVUFBSyxHQUFZLEtBQUssQ0FBQztRQUN2QixpQkFBWSxHQUFXLFNBQVMsQ0FBQztRQUt2QiwwQkFBcUIsR0FBaUI7WUFDcEQsT0FBTyxFQUFFLE9BQU87WUFDaEIsUUFBUSxFQUFFLHdCQUF3QjtZQUNsQyxTQUFTLEVBQUUsMEJBQTBCO1lBQ3JDLFNBQVMsRUFBRSwwQkFBMEI7WUFDckMsR0FBRyxFQUFFLG1DQUFtQztZQUN4QyxHQUFHLEVBQUUsa0NBQWtDO1lBQ3ZDLE9BQU8sRUFBRSxlQUFlO1NBQzFCLENBQUM7UUFPRixhQUFROzs7O1FBQUcsVUFBQyxDQUFNO1FBQ2xCLENBQUMsRUFBQTtRQUVELGNBQVM7OztRQUFHO1FB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QW1DOztJQUNuQyw2Q0FBcUM7O0lBQ3JDLHFDQUF1Qjs7SUFDdkIsb0NBQXNCOztJQUN0QixxQ0FBb0I7O0lBQ3BCLCtDQUFrQzs7SUFDbEMsZ0RBQW1DOztJQUNuQywyQ0FBcUM7O0lBQ3JDLHdDQUEwQjs7SUFDMUIsMkNBQW1FOztJQUNuRSxvQ0FBNEQ7O0lBQzVELDZDQUFzRTs7SUFFdEUsd0NBQWlDOztJQUNqQyxxQ0FBOEI7O0lBQzlCLDRDQUF3Qzs7SUFDeEMsNkNBQTJDOztJQUMzQywwQ0FBdUI7O0lBQ3ZCLHNDQUE0Qjs7Ozs7SUFFNUIscURBUUU7O0lBT0Ysd0NBQ0M7O0lBRUQseUNBQ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogwqkgMjAxNyBTdHJhdGlvIEJpZyBEYXRhIEluYy4sIFN1Y3Vyc2FsIGVuIEVzcGHDsWEuXG4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wLlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTtcbiAqIHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuXG4gKiBTZWUgdGhlIHRlcm1zIG9mIHRoZSBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjAuXG4gKi9cbmltcG9ydCB7XG4gICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgIENvbXBvbmVudCxcbiAgIEV2ZW50RW1pdHRlcixcbiAgIGZvcndhcmRSZWYsXG4gICBIb3N0QmluZGluZyxcbiAgIElucHV0LFxuICAgT25DaGFuZ2VzLFxuICAgT25Jbml0LFxuICAgT3V0cHV0LFxuICAgU2ltcGxlQ2hhbmdlcyxcbiAgIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBGb3JtQ29udHJvbCwgTkdfVkFMSURBVE9SUywgTkdfVkFMVUVfQUNDRVNTT1IsIE5nTW9kZWwgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTdElucHV0RXJyb3IgfSBmcm9tICcuLi8uLi9zdC1pbnB1dC9zdC1pbnB1dC5lcnJvci5tb2RlbCc7XG5pbXBvcnQgeyBTdEVnZW8sIFN0UmVxdWlyZWQgfSBmcm9tICcuLi8uLi9kZWNvcmF0b3JzL3JlcXVpcmUtZGVjb3JhdG9ycyc7XG5pbXBvcnQgeyBTdERyb3BEb3duTWVudUl0ZW0gfSBmcm9tICcuLi8uLi9zdC1kcm9wZG93bi1tZW51L3N0LWRyb3Bkb3duLW1lbnUuaW50ZXJmYWNlJztcbmltcG9ydCB7IEpTT05TY2hlbWE0LCBKU09OU2NoZW1hNFR5cGUsIEpTT05TY2hlbWE0VHlwZU5hbWUgfSBmcm9tICdqc29uLXNjaGVtYSc7XG5cbkBTdEVnZW8oKVxuQENvbXBvbmVudCh7XG4gICBzZWxlY3RvcjogJ3N0LWZvcm0tZmllbGQnLFxuICAgdGVtcGxhdGVVcmw6ICcuL3N0LWZvcm0tZmllbGQuY29tcG9uZW50Lmh0bWwnLFxuICAgc3R5bGVVcmxzOiBbJy4vc3QtZm9ybS1maWVsZC5jb21wb25lbnQuc2NzcyddLFxuICAgcHJvdmlkZXJzOiBbXG4gICAgICB7IHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTdEZvcm1GaWVsZENvbXBvbmVudCksIG11bHRpOiB0cnVlIH0sXG4gICAgICB7IHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFN0Rm9ybUZpZWxkQ29tcG9uZW50KSwgbXVsdGk6IHRydWUgfVxuICAgXSxcbiAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgaG9zdDoge1xuICAgICAgY2xhc3M6ICdzdC1mb3JtLWZpZWxkJ1xuICAgfVxufSlcblxuZXhwb3J0IGNsYXNzIFN0Rm9ybUZpZWxkQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgIEBJbnB1dCgpIEBTdFJlcXVpcmVkKCkgc2NoZW1hOiB7IGtleTogc3RyaW5nLCB2YWx1ZTogSlNPTlNjaGVtYTQgfTtcbiAgIEBJbnB1dCgpIHJlcXVpcmVkOiBib29sZWFuID0gZmFsc2U7XG4gICBASW5wdXQoKSBlcnJvck1lc3NhZ2VzOiBTdElucHV0RXJyb3I7XG4gICBASW5wdXQoKSBxYVRhZzogc3RyaW5nO1xuICAgQElucHV0KCkgbmFtZTogc3RyaW5nO1xuICAgQElucHV0KCkgdmFsdWU6IGFueTtcbiAgIEBJbnB1dCgpIGhhc0RlcGVuZGVuY2llczogYm9vbGVhbjtcbiAgIEBJbnB1dCgpIGZvcmNlVmFsaWRhdGlvbnM6IGJvb2xlYW47XG4gICBASW5wdXQoKSBzaG93VG9vbHRpcDogYm9vbGVhbiA9IHRydWU7XG4gICBASW5wdXQoKSBtYXhXaWR0aDogbnVtYmVyOyAvLyBudW1iZXIgb2YgY2hhcmFjdGVycyBmcm9tIHdpdGNoIGlucHV0cyB3aWxsIGJlIGRpc3BsYXllZCBhcyB0ZXh0YXJlYVxuICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgQE91dHB1dCgpIGJsdXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gICBAVmlld0NoaWxkKCd0ZW1wbGF0ZU1vZGVsJywgeyBzdGF0aWM6IGZhbHNlIH0pIHRlbXBsYXRlTW9kZWw6IE5nTW9kZWw7XG5cbiAgIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlOyAvLyBUbyBjaGVjayBkaXNhYmxlXG4gICBwdWJsaWMgZm9jdXM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcbiAgIHB1YmxpYyBzZWxlY3RPcHRpb25zOiBTdERyb3BEb3duTWVudUl0ZW1bXTtcbiAgIHB1YmxpYyBpbm5lclZhbHVlOiBhbnk7XG4gICBwdWJsaWMgZXJyb3JzOiBTdElucHV0RXJyb3I7XG5cbiAgIHByaXZhdGUgcmVhZG9ubHkgX2RlZmF1bHRFcnJvck1lc3NhZ2VzOiBTdElucHV0RXJyb3IgPSB7XG4gICAgICBnZW5lcmljOiAnRXJyb3InLFxuICAgICAgcmVxdWlyZWQ6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyxcbiAgICAgIG1pbkxlbmd0aDogJ1RoZSBmaWVsZCBtaW4gbGVuZ3RoIGlzICcsXG4gICAgICBtYXhMZW5ndGg6ICdUaGUgZmllbGQgbWF4IGxlbmd0aCBpcyAnLFxuICAgICAgbWluOiAnVGhlIG51bWJlciBoYXMgdG8gYmUgaGlnaGVyIHRoYW4gJyxcbiAgICAgIG1heDogJ1RoZSBudW1iZXIgaGFzIHRvIGJlIG1pbm9yIHRoYW4gJyxcbiAgICAgIHBhdHRlcm46ICdJbnZhbGlkIHZhbHVlJ1xuICAgfTtcblxuICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5yZWFkLW9ubHknKVxuICAgZ2V0IHJlYWRPbmx5KCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hICYmIHRoaXMuc2NoZW1hLnZhbHVlICYmIHRoaXMuc2NoZW1hLnZhbHVlLnJlYWRPbmx5ID09PSB0cnVlO1xuICAgfVxuXG4gICBvbkNoYW5nZSA9IChfOiBhbnkpID0+IHtcbiAgIH1cblxuICAgb25Ub3VjaGVkID0gKCkgPT4ge1xuICAgfVxuXG4gICBzZXRWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcbiAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gICB9XG5cbiAgIHZhbGlkYXRlKGNvbnRyb2w6IEZvcm1Db250cm9sKTogYW55IHtcbiAgICAgIGlmICh0aGlzLnRlbXBsYXRlTW9kZWwgJiYgdGhpcy50ZW1wbGF0ZU1vZGVsLmNvbnRyb2wgJiYgdGhpcy50ZW1wbGF0ZU1vZGVsLmNvbnRyb2wudmFsaWRhdG9yKSB7XG4gICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZU1vZGVsLmNvbnRyb2wudmFsaWRhdG9yKGNvbnRyb2wpO1xuICAgICAgfVxuICAgfVxuXG4gICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgIGlmICh0aGlzLnNjaGVtYS52YWx1ZSAmJiB0aGlzLnNjaGVtYS52YWx1ZS5lbnVtKSB7XG4gICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbnMgPSB0aGlzLmdldFNlbGVjdE9wdGlvbnMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xvYWRFcnJvck1lc3NhZ2VzKCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgIT09IHVuZGVmaW5lZCAmJiAodGhpcy5pbm5lclZhbHVlID09PSB1bmRlZmluZWQgfHwgdGhpcy5pbm5lclZhbHVlID09PSBudWxsKSkge1xuICAgICAgICAgICAgdGhpcy5pbm5lclZhbHVlID0gdGhpcy5kZWZhdWx0O1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmlubmVyVmFsdWUpO1xuICAgICAgICAgfVxuICAgICAgICAgaWYgKHRoaXMuc2NoZW1hLnZhbHVlLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICB0aGlzLnNldERpc2FibGVkU3RhdGUodHJ1ZSk7XG4gICAgICAgICB9XG4gICAgICB9KTtcbiAgIH1cblxuICAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgIGlmIChjaGFuZ2VzLnNjaGVtYSkge1xuICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25zID0gdGhpcy5nZXRTZWxlY3RPcHRpb25zKCk7XG4gICAgICB9XG4gICB9XG5cblxuICAgZ2V0IHR5cGUoKTogc3RyaW5nIHtcbiAgICAgIHN3aXRjaCAodGhpcy5zY2hlbWEudmFsdWUudHlwZSkge1xuICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIGlmICghdGhpcy5zY2hlbWEudmFsdWUuZW51bSkge1xuICAgICAgICAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICByZXR1cm4gJ3NlbGVjdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICBjYXNlICdpbnRlZ2VyJzpcbiAgICAgICAgICAgIHJldHVybiAnbnVtYmVyJztcbiAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gPEpTT05TY2hlbWE0VHlwZU5hbWU+IHRoaXMuc2NoZW1hLnZhbHVlLnR5cGU7XG4gICAgICB9XG4gICB9XG5cbiAgIGdldCBtaW4oKTogbnVtYmVyIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVtYS52YWx1ZS5leGNsdXNpdmVNaW5pbXVtID8gdGhpcy5zY2hlbWEudmFsdWUubWluaW11bSArIHRoaXMuZ2V0SW5wdXRTdGVwKCkgOiB0aGlzLnNjaGVtYS52YWx1ZS5taW5pbXVtO1xuICAgfVxuXG4gICBnZXQgbWF4KCk6IG51bWJlciB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlbWEudmFsdWUuZXhjbHVzaXZlTWF4aW11bSA/IHRoaXMuc2NoZW1hLnZhbHVlLm1heGltdW0gLSB0aGlzLmdldElucHV0U3RlcCgpIDogdGhpcy5zY2hlbWEudmFsdWUubWF4aW11bTtcbiAgIH1cblxuICAgZ2V0IGxhYmVsKCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlbWEudmFsdWUudGl0bGU7XG4gICB9XG5cbiAgIGdldCBwbGFjZWhvbGRlcigpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLnZhbHVlLmV4YW1wbGVzICYmIHRoaXMuc2NoZW1hLnZhbHVlLmV4YW1wbGVzWzBdID8gdGhpcy5zY2hlbWEudmFsdWUuZXhhbXBsZXNbMF0gOiAnJztcbiAgIH1cblxuICAgZ2V0IGRlZmF1bHQoKTogSlNPTlNjaGVtYTRUeXBlIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVtYS52YWx1ZS5kZWZhdWx0O1xuICAgfVxuXG4gICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcbiAgICAgIGlmICh0aGlzLnNob3dUb29sdGlwKSB7XG4gICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWEudmFsdWUuZGVzY3JpcHRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgIH1cblxuICAgZ2V0IG1pbkxlbmd0aCgpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLnZhbHVlLm1pbkxlbmd0aDtcbiAgIH1cblxuICAgZ2V0IG1heExlbmd0aCgpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hLnZhbHVlLm1heExlbmd0aDtcbiAgIH1cblxuICAgZ2V0IHBhdHRlcm4oKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVtYS52YWx1ZS5wYXR0ZXJuO1xuICAgfVxuXG4gICBoYXNUeXBlKHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSAndGV4dCcgfHwgdGhpcy50eXBlID09PSAnbnVtYmVyJyB8fCB0aGlzLnR5cGUgPT09ICdpbnRlZ2VyJztcbiAgICAgICAgIGNhc2UgJ3N3aXRjaCc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSAnYm9vbGVhbicgJiYgdGhpcy5oYXNEZXBlbmRlbmNpZXM7XG4gICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSAnYm9vbGVhbicgJiYgIXRoaXMuaGFzRGVwZW5kZW5jaWVzO1xuICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IHR5cGU7XG4gICAgICB9XG4gICB9XG5cbiAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgICAgdGhpcy5pbm5lclZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XG4gICB9XG5cbiAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46IChfOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgIH1cblxuICAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICB9XG5cbiAgIHNldERpc2FibGVkU3RhdGUoZGlzYWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgaWYgKHRoaXMudGVtcGxhdGVNb2RlbCAmJiB0aGlzLnRlbXBsYXRlTW9kZWwuY29udHJvbCkge1xuICAgICAgICAgaWYgKGRpc2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNb2RlbC5jb250cm9sLmRpc2FibGUoKTtcbiAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTW9kZWwuY29udHJvbC5lbmFibGUoKTtcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cblxuICAgZ2V0SW5wdXRTdGVwKCk6IG51bWJlciB7XG4gICAgICBpZiAodGhpcy5zY2hlbWEudmFsdWUudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgIHJldHVybiAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICB9XG5cbiAgIGdldFNlbGVjdE9wdGlvbnMoKTogU3REcm9wRG93bk1lbnVJdGVtW10ge1xuICAgICAgbGV0IG9wdGlvbnM6IFN0RHJvcERvd25NZW51SXRlbVtdID0gW107XG4gICAgICBpZiAodGhpcy5zY2hlbWEudmFsdWUuZW51bSkge1xuICAgICAgICAgb3B0aW9ucy5wdXNoKDxTdERyb3BEb3duTWVudUl0ZW0+IHsgbGFiZWw6ICdTZWxlY3Qgb25lIG9wdGlvbicsIHZhbHVlOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICBsZXQgZW51bVZhbHVlczogc3RyaW5nW10gPSA8c3RyaW5nW10+IHRoaXMuc2NoZW1hLnZhbHVlLmVudW07XG4gICAgICAgICBlbnVtVmFsdWVzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2goPFN0RHJvcERvd25NZW51SXRlbT4geyBsYWJlbDogdmFsdWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICB9XG5cbiAgIG9uQmx1cigpOiB2b2lkIHtcbiAgICAgIHRoaXMuYmx1ci5lbWl0KCk7XG4gICB9XG5cbiAgIHByaXZhdGUgX2xvYWRFcnJvck1lc3NhZ2VzKCk6IHZvaWQge1xuICAgICAgdGhpcy5lcnJvcnMgPSB7XG4gICAgICAgICByZXF1aXJlZDogKHRoaXMuZXJyb3JNZXNzYWdlcyAmJiB0aGlzLmVycm9yTWVzc2FnZXMucmVxdWlyZWQpIHx8IHRoaXMuX2RlZmF1bHRFcnJvck1lc3NhZ2VzLnJlcXVpcmVkLFxuICAgICAgICAgcGF0dGVybjogKHRoaXMuZXJyb3JNZXNzYWdlcyAmJiB0aGlzLmVycm9yTWVzc2FnZXMucGF0dGVybikgfHwgdGhpcy5fZGVmYXVsdEVycm9yTWVzc2FnZXMucGF0dGVybixcbiAgICAgICAgIGdlbmVyaWM6ICh0aGlzLmVycm9yTWVzc2FnZXMgJiYgdGhpcy5lcnJvck1lc3NhZ2VzLmdlbmVyaWMpIHx8IHRoaXMuX2RlZmF1bHRFcnJvck1lc3NhZ2VzLmdlbmVyaWMsXG4gICAgICAgICBtaW5MZW5ndGg6ICgodGhpcy5lcnJvck1lc3NhZ2VzICYmIHRoaXMuZXJyb3JNZXNzYWdlcy5taW5MZW5ndGgpIHx8IHRoaXMuX2RlZmF1bHRFcnJvck1lc3NhZ2VzLm1pbkxlbmd0aCkgKyB0aGlzLnNjaGVtYS52YWx1ZS5taW5MZW5ndGgsXG4gICAgICAgICBtYXhMZW5ndGg6ICgodGhpcy5lcnJvck1lc3NhZ2VzICYmIHRoaXMuZXJyb3JNZXNzYWdlcy5tYXhMZW5ndGgpIHx8IHRoaXMuX2RlZmF1bHRFcnJvck1lc3NhZ2VzLm1heExlbmd0aCkgKyB0aGlzLnNjaGVtYS52YWx1ZS5tYXhMZW5ndGgsXG4gICAgICAgICBtaW46ICgodGhpcy5lcnJvck1lc3NhZ2VzICYmIHRoaXMuZXJyb3JNZXNzYWdlcy5taW4pIHx8IHRoaXMuX2RlZmF1bHRFcnJvck1lc3NhZ2VzLm1pbikgKyAodGhpcy5taW4gLSB0aGlzLmdldElucHV0U3RlcCgpKSxcbiAgICAgICAgIG1heDogKCh0aGlzLmVycm9yTWVzc2FnZXMgJiYgdGhpcy5lcnJvck1lc3NhZ2VzLm1heCkgfHwgdGhpcy5fZGVmYXVsdEVycm9yTWVzc2FnZXMubWF4KSArICh0aGlzLm1heCArIHRoaXMuZ2V0SW5wdXRTdGVwKCkpXG4gICAgICB9O1xuICAgfVxufVxuIl19