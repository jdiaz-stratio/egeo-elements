/**
 * @fileoverview added by tsickle
 * Generated from: lib/st-table/st-table.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 * © 2017 Stratio Big Data Inc., Sucursal en España.
 *
 * This software is licensed under the Apache License, Version 2.0.
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the terms of the License for more details.
 *
 * SPDX-License-Identifier: Apache-2.0.
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output, TemplateRef, HostBinding, Host } from '@angular/core';
import { StEgeo, StRequired } from '../decorators/require-decorators';
import { Order, ORDER_TYPE } from './shared/order';
import { cloneDeep as _cloneDeep, get as _get } from 'lodash';
import { StTableIconClasses } from './st-table.interface';
/**
 * \@description {Component} [Table]
 *
 * The table component has been designed to display any content like images, text, graphs, etc.
 *
 * * \@model
 *
 *   [StTableHeader] {./shared/table-header.interface.ts#StTableHeader}
 *   [StDynamicTableHeader] {./shared/table-header.interface.ts#StFilterElement}
 *   [StFilterHeader] {./shared/table-header.interface.ts#StFilterHeader}
 *   [StTableFilterIconClasses] {./st-table.interface.ts#StTableFilterIconClasses}
 *   [StTableIconClasses] {./st-table.interface.ts#StTableIconClasses}
 *
 * \@example
 *
 * {html}
 *
 * ```
 * <st-table [fields]="fields" [sortable]="true" (changeOrder)="yourFunctionToOrder($event)">
 * <tr st-table-row *ngFor="let userData of data">
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.id}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.name}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.lastName}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.phone}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.company}}</label>
 * </td>
 * <td st-table-cell st-table-row-content>
 *    <label >{{userData.completedProfile}}</label>
 * </td>
 * <td st-table-row-hover>
 *    <i class="icon icon-arrow2_right"></i>
 * </td>
 * </tr>
 * </st-table>
 * ```
 *
 */
var StTableComponent = /** @class */ (function () {
    function StTableComponent(_cd) {
        this._cd = _cd;
        /**
         * \@Input {boolean} [header=true] Boolean to show or hide the header
         */
        this.header = true;
        /**
         * \@Input {boolean} [sortable=true] Boolean to make sortable the table, To enable sorting of columns use
         * the new "sortable" field inside stTableHeader model
         */
        this.sortable = true;
        /**
         * \@Input {boolean} [filterable=true] Boolean to make filterable the table, To enable filtering of columns use
         * the new "filterable" field inside stTableHeader model (necesary define filterConfig).
         */
        this.filterable = false;
        /**
         * \@Input {boolean} [selectableAll=false] Boolean to show or hide a checkbox in the header to select or
         *  deselect all rows
         */
        this.selectableAll = false;
        /**
         * \@Input {StTableIconClasses} [iconClasses=''] List of icon classes
         */
        this.iconClasses = new StTableIconClasses();
        /**
         * \@Output {Order} [changeOrder=''] Event emitted with the new order which has to be applied to the table rows
         */
        this.changeOrder = new EventEmitter();
        /**
         * \@Output {boolean} [selectAll=''] Event emitted when user interacts with the checkbox to select or deselect
         * all rows
         */
        this.selectAll = new EventEmitter();
        /**
         * \@Output {string} [clickFilter=] Event emitted when clicking on filters icon
         */
        this.clickFilter = new EventEmitter();
        /**
         * \@Output {StTableHeader[]} [selectFilters=''] Event emitted  when user interacts with filter button without a custom template
         */
        this.selectFilters = new EventEmitter();
        this.tableClasses = {};
        this.orderTypes = ORDER_TYPE;
        this.visibleFilter = -1;
        this._fixedHeader = false;
        this._hasHoverMenu = false;
    }
    Object.defineProperty(StTableComponent.prototype, "fixedHeader", {
        /** @Input {boolean} [fixedHeader=false] Boolean to fix the table header */
        get: /**
         * \@Input {boolean} [fixedHeader=false] Boolean to fix the table header
         * @return {?}
         */
        function () {
            return this._fixedHeader;
        },
        set: /**
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            this._fixedHeader = newValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StTableComponent.prototype, "customClasses", {
        /** @Input {string} [customClasses=] Classes for adding styles to table tag from outside. These can be: separated-rows */
        get: /**
         * \@Input {string} [customClasses=] Classes for adding styles to table tag from outside. These can be: separated-rows
         * @return {?}
         */
        function () {
            return this._customClasses;
        },
        set: /**
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            this.tableClasses[this._customClasses] = undefined;
            this._customClasses = newValue;
            this.tableClasses[this._customClasses] = this._customClasses;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StTableComponent.prototype, "selectedAll", {
        /** @Input {boolean} [selectedAll=false] It specifies if all rows are selected */
        get: /**
         * \@Input {boolean} [selectedAll=false] It specifies if all rows are selected
         * @return {?}
         */
        function () {
            return this._selectedAll;
        },
        set: /**
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            this._selectedAll = newValue;
            this._cd.markForCheck();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StTableComponent.prototype, "hasHoverMenu", {
        /** @Input {boolean} [hasHoverMenu=false] It specifies if a menu has to be displayed when user puts the mouse over
         * the rows. Remember to add a cell with the selector st-table-row-hover for adding content to the menu
         */
        get: /**
         * \@Input {boolean} [hasHoverMenu=false] It specifies if a menu has to be displayed when user puts the mouse over
         * the rows. Remember to add a cell with the selector st-table-row-hover for adding content to the menu
         * @return {?}
         */
        function () {
            return this._hasHoverMenu;
        },
        set: /**
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            this._hasHoverMenu = newValue;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    StTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.filterable && !this.statusFilter) {
            this.statusFilter = new Array(this.fields.length);
            this.statusFilter.fill(false);
        }
    };
    /**
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.getHeaderItemClass = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        /** @type {?} */
        var isOrderAsc = this.isSortedByFieldAndDirection(field, this.orderTypes.ASC);
        return isOrderAsc ? this.iconClasses.sort.asc : this.iconClasses.sort.desc;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.isSortable = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        return field && field.sortable !== undefined ? field.sortable : this.sortable;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.isSortedByField = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        return this.currentOrder && this.currentOrder.orderBy === field.id;
    };
    /**
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.isFilterable = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        return this.filterable && (_get(field, 'filters.filterConfig')) ||
            (this.templateContentFilter && _get(field, 'filters')) ||
            _get(field, 'filters.templateRef');
    };
    /**
     * @param {?} index
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.onClickPopover = /**
     * @param {?} index
     * @param {?} field
     * @return {?}
     */
    function (index, field) {
        if (this.visibleFilter === index) {
            this.visibleFilter = -1;
        }
        else {
            this.visibleFilter = index;
        }
        this.clickFilter.emit(field);
        this._cd.markForCheck();
    };
    /**
     * @param {?} field
     * @return {?}
     */
    StTableComponent.prototype.onChangeOrder = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        /** @type {?} */
        var _currentOrder;
        if (field && this.isSortable(field)) {
            if (this.currentOrder && this.currentOrder.orderBy === field.id) {
                _currentOrder = this.changeOrderDirection();
            }
            else {
                _currentOrder = new Order(field.id, ORDER_TYPE.ASC);
            }
            this.changeOrder.emit(_currentOrder);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    StTableComponent.prototype.onSelectAll = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.selectAll.emit(event.checked);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    StTableComponent.prototype.onSelectedFilters = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var selectedFilters = _cloneDeep(this.fields);
        selectedFilters = selectedFilters.filter((/**
         * @param {?} field
         * @return {?}
         */
        function (field) {
            if (_get(field, 'filters.filterConfig')) {
                field.filters.filterConfig = field.filters.filterConfig.filter((/**
                 * @param {?} conf
                 * @return {?}
                 */
                function (conf) { return conf.selected; }));
                if (field.filters.filterConfig.length > 0) {
                    return field;
                }
            }
        }));
        this.selectFilters.emit(selectedFilters);
    };
    /**
     * @private
     * @return {?}
     */
    StTableComponent.prototype.changeOrderDirection = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newDirection = this.currentOrder.type === ORDER_TYPE.ASC ? ORDER_TYPE.DESC : ORDER_TYPE.ASC;
        return new Order(this.currentOrder.orderBy, newDirection);
    };
    /**
     * @private
     * @param {?} field
     * @param {?} orderType
     * @return {?}
     */
    StTableComponent.prototype.isSortedByFieldAndDirection = /**
     * @private
     * @param {?} field
     * @param {?} orderType
     * @return {?}
     */
    function (field, orderType) {
        return this.isSortedByField(field) && this.currentOrder.type === orderType;
    };
    StTableComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    StTableComponent.decorators = [
        { type: Component, args: [{
                    selector: 'st-table',
                    template: "<!--\n\n    \u00A9 2017 Stratio Big Data Inc., Sucursal en Espa\u00F1a.\n\n    This software is licensed under the Apache License, Version 2.0.\n    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n    See the terms of the License for more details.\n\n    SPDX-License-Identifier: Apache-2.0.\n\n-->\n<table class='st-table' [ngClass]=\"tableClasses\" [attr.id]='qaTag'>\n   <thead>\n      <tr *ngIf=\"header\" class='st-table__header'>\n\n         <th *ngFor='let field of fields; let i = index' class='st-table__header-item' [ngClass]=\"{\n             'st-table__header-item--selected': isSortedByField(field),\n             'st-table__header-item--sortable': isSortable(field),\n             'st-table__header-item--filterable': isFilterable(field)}\">\n            <st-checkbox *ngIf=\"i == 0 && selectableAll\" qaTag=\"select-all-checkbox\" class=\"st-table__checkbox\" name=\"selectAll\"\n                [checked]=\"selectedAll\" (change)=\"onSelectAll($event)\">\n            </st-checkbox>\n            <label class='st-table__header-text' (click)=\"onChangeOrder(field)\">\n               <i *ngIf=\"isSortedByField(field)\" class='st-table__order-arrow' [ngClass]=\"getHeaderItemClass(field)\">\n               </i>\n               {{field.label}}\n            </label>\n            <st-popover-filter *ngIf=\"isFilterable(field)\"\n               [field]=\"field\"\n               [index]=\"i\"\n               [templateContentFilter]=\"templateContentFilter\"\n               [filtered]=\"statusFilter[i]\"\n               [hidden]=\"visibleFilter !== i\"\n               [iconClasses]=\"iconClasses?.filter\"\n               (filter)=\"onSelectedFilters($event)\"\n               (click)=\"onClickPopover(i, field)\">\n            </st-popover-filter>\n         </th>\n         <th *ngIf=\"hasHoverMenu\"></th> <!-- For hover cell -->\n      </tr>\n   </thead>\n   <ng-content></ng-content>\n</table>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["@charset \"UTF-8\";.st-table{width:100%}.st-table__header-item{text-transform:capitalize;position:relative;vertical-align:bottom}.st-table__header-text{position:relative;height:100%;display:inline-flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start;cursor:inherit}"]
                }] }
    ];
    /** @nocollapse */
    StTableComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    StTableComponent.propDecorators = {
        fields: [{ type: Input }],
        qaTag: [{ type: Input }],
        header: [{ type: Input }],
        sortable: [{ type: Input }],
        filterable: [{ type: Input }],
        selectableAll: [{ type: Input }],
        currentOrder: [{ type: Input }],
        templateContentFilter: [{ type: Input }],
        statusFilter: [{ type: Input }],
        iconClasses: [{ type: Input }],
        fixedHeader: [{ type: Input }, { type: HostBinding, args: ['class.st-custom-scrollbar',] }, { type: HostBinding, args: ['class.fixed-header',] }],
        customClasses: [{ type: Input }],
        selectedAll: [{ type: Input }],
        hasHoverMenu: [{ type: Input }],
        changeOrder: [{ type: Output }],
        selectAll: [{ type: Output }],
        clickFilter: [{ type: Output }],
        selectFilters: [{ type: Output }]
    };
    tslib_1.__decorate([
        StRequired(),
        tslib_1.__metadata("design:type", Array)
    ], StTableComponent.prototype, "fields", void 0);
    /**
     * \@description {Component} [Table]
     *
     * The table component has been designed to display any content like images, text, graphs, etc.
     *
     * * \@model
     *
     *   [StTableHeader] {./shared/table-header.interface.ts#StTableHeader}
     *   [StDynamicTableHeader] {./shared/table-header.interface.ts#StFilterElement}
     *   [StFilterHeader] {./shared/table-header.interface.ts#StFilterHeader}
     *   [StTableFilterIconClasses] {./st-table.interface.ts#StTableFilterIconClasses}
     *   [StTableIconClasses] {./st-table.interface.ts#StTableIconClasses}
     *
     * \@example
     *
     * {html}
     *
     * ```
     * <st-table [fields]="fields" [sortable]="true" (changeOrder)="yourFunctionToOrder($event)">
     * <tr st-table-row *ngFor="let userData of data">
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.id}}</label>
     * </td>
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.name}}</label>
     * </td>
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.lastName}}</label>
     * </td>
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.phone}}</label>
     * </td>
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.company}}</label>
     * </td>
     * <td st-table-cell st-table-row-content>
     *    <label >{{userData.completedProfile}}</label>
     * </td>
     * <td st-table-row-hover>
     *    <i class="icon icon-arrow2_right"></i>
     * </td>
     * </tr>
     * </st-table>
     * ```
     *
     */
    StTableComponent = tslib_1.__decorate([
        StEgeo(),
        tslib_1.__metadata("design:paramtypes", [ChangeDetectorRef])
    ], StTableComponent);
    return StTableComponent;
}());
export { StTableComponent };
if (false) {
    /**
     * \@Input {StTableHeader[]} [fields=''] List of field displayed in the header
     * @type {?}
     */
    StTableComponent.prototype.fields;
    /**
     * \@Input {string} [qaTag=''] Prefix used to generate the id values for qa tests
     * @type {?}
     */
    StTableComponent.prototype.qaTag;
    /**
     * \@Input {boolean} [header=true] Boolean to show or hide the header
     * @type {?}
     */
    StTableComponent.prototype.header;
    /**
     * \@Input {boolean} [sortable=true] Boolean to make sortable the table, To enable sorting of columns use
     * the new "sortable" field inside stTableHeader model
     * @type {?}
     */
    StTableComponent.prototype.sortable;
    /**
     * \@Input {boolean} [filterable=true] Boolean to make filterable the table, To enable filtering of columns use
     * the new "filterable" field inside stTableHeader model (necesary define filterConfig).
     * @type {?}
     */
    StTableComponent.prototype.filterable;
    /**
     * \@Input {boolean} [selectableAll=false] Boolean to show or hide a checkbox in the header to select or
     *  deselect all rows
     * @type {?}
     */
    StTableComponent.prototype.selectableAll;
    /**
     * \@Input {Order} [currentOrder=''] It specifies what is the current order applied to the table
     * @type {?}
     */
    StTableComponent.prototype.currentOrder;
    /**
     * \@Input {TemplateRef} [templateContentFilter=undefined] Reference to paint a custom template inside popover content
     * @type {?}
     */
    StTableComponent.prototype.templateContentFilter;
    /**
     * \@Input {boolean[]} [statusFilter=''] List of status filter by column, needed with templateContentFilter
     * @type {?}
     */
    StTableComponent.prototype.statusFilter;
    /**
     * \@Input {StTableIconClasses} [iconClasses=''] List of icon classes
     * @type {?}
     */
    StTableComponent.prototype.iconClasses;
    /**
     * \@Output {Order} [changeOrder=''] Event emitted with the new order which has to be applied to the table rows
     * @type {?}
     */
    StTableComponent.prototype.changeOrder;
    /**
     * \@Output {boolean} [selectAll=''] Event emitted when user interacts with the checkbox to select or deselect
     * all rows
     * @type {?}
     */
    StTableComponent.prototype.selectAll;
    /**
     * \@Output {string} [clickFilter=] Event emitted when clicking on filters icon
     * @type {?}
     */
    StTableComponent.prototype.clickFilter;
    /**
     * \@Output {StTableHeader[]} [selectFilters=''] Event emitted  when user interacts with filter button without a custom template
     * @type {?}
     */
    StTableComponent.prototype.selectFilters;
    /** @type {?} */
    StTableComponent.prototype.tableClasses;
    /** @type {?} */
    StTableComponent.prototype.orderTypes;
    /** @type {?} */
    StTableComponent.prototype.visibleFilter;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._fixedHeader;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._selectedAll;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._hasHoverMenu;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._customClasses;
    /**
     * @type {?}
     * @private
     */
    StTableComponent.prototype._cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3QtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHN0cmF0aW8vZWdlby8iLCJzb3VyY2VzIjpbImxpYi9zdC10YWJsZS9zdC10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQVVBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNKLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDdEUsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRCxPQUFPLEVBQUUsU0FBUyxJQUFJLFVBQVUsRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQzlELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUE2SnZELDBCQUFvQixHQUFzQjtRQUF0QixRQUFHLEdBQUgsR0FBRyxDQUFtQjs7OztRQS9GakMsV0FBTSxHQUFZLElBQUksQ0FBQzs7Ozs7UUFLdkIsYUFBUSxHQUFZLElBQUksQ0FBQzs7Ozs7UUFLekIsZUFBVSxHQUFZLEtBQUssQ0FBQzs7Ozs7UUFLNUIsa0JBQWEsR0FBWSxLQUFLLENBQUM7Ozs7UUFVL0IsZ0JBQVcsR0FBd0IsSUFBSSxrQkFBa0IsRUFBRSxDQUFDOzs7O1FBaUQzRCxnQkFBVyxHQUF3QixJQUFJLFlBQVksRUFBRSxDQUFDOzs7OztRQUl0RCxjQUFTLEdBQTBCLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFHdEQsZ0JBQVcsR0FBZ0MsSUFBSSxZQUFZLEVBQUUs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Qjs7Ozs7SUFDOUIseUNBQXVDOzs7OztJQUN2QywwQ0FBK0I7Ozs7O0lBRW5CLCtCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiDCqSAyMDE3IFN0cmF0aW8gQmlnIERhdGEgSW5jLiwgU3VjdXJzYWwgZW4gRXNwYcOxYS5cbiAqXG4gKiBUaGlzIHNvZnR3YXJlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZO1xuICogd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS5cbiAqIFNlZSB0aGUgdGVybXMgb2YgdGhlIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMC5cbiAqL1xuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgSG9zdEJpbmRpbmcsIEhvc3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgU3RFZ2VvLCBTdFJlcXVpcmVkIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9yZXF1aXJlLWRlY29yYXRvcnMnO1xuaW1wb3J0IHsgT3JkZXIsIE9SREVSX1RZUEUgfSBmcm9tICcuL3NoYXJlZC9vcmRlcic7XG5pbXBvcnQgeyBTdFRhYmxlSGVhZGVyIH0gZnJvbSAnLi9zaGFyZWQvdGFibGUtaGVhZGVyLmludGVyZmFjZSc7XG5pbXBvcnQgeyBjbG9uZURlZXAgYXMgX2Nsb25lRGVlcCwgZ2V0IGFzIF9nZXQgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgU3RUYWJsZUljb25DbGFzc2VzIH0gZnJvbSAnLi9zdC10YWJsZS5pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiB7Q29tcG9uZW50fSBbVGFibGVdXG4gKlxuICogVGhlIHRhYmxlIGNvbXBvbmVudCBoYXMgYmVlbiBkZXNpZ25lZCB0byBkaXNwbGF5IGFueSBjb250ZW50IGxpa2UgaW1hZ2VzLCB0ZXh0LCBncmFwaHMsIGV0Yy5cbiAqXG4gKiAqIEBtb2RlbFxuICpcbiAqICAgW1N0VGFibGVIZWFkZXJdIHsuL3NoYXJlZC90YWJsZS1oZWFkZXIuaW50ZXJmYWNlLnRzI1N0VGFibGVIZWFkZXJ9XG4gKiAgIFtTdER5bmFtaWNUYWJsZUhlYWRlcl0gey4vc2hhcmVkL3RhYmxlLWhlYWRlci5pbnRlcmZhY2UudHMjU3RGaWx0ZXJFbGVtZW50fVxuICogICBbU3RGaWx0ZXJIZWFkZXJdIHsuL3NoYXJlZC90YWJsZS1oZWFkZXIuaW50ZXJmYWNlLnRzI1N0RmlsdGVySGVhZGVyfVxuICogICBbU3RUYWJsZUZpbHRlckljb25DbGFzc2VzXSB7Li9zdC10YWJsZS5pbnRlcmZhY2UudHMjU3RUYWJsZUZpbHRlckljb25DbGFzc2VzfVxuICogICBbU3RUYWJsZUljb25DbGFzc2VzXSB7Li9zdC10YWJsZS5pbnRlcmZhY2UudHMjU3RUYWJsZUljb25DbGFzc2VzfVxuICpcbiAqIEBleGFtcGxlXG4gKlxuICoge2h0bWx9XG4gKlxuICogYGBgXG4gKiA8c3QtdGFibGUgW2ZpZWxkc109XCJmaWVsZHNcIiBbc29ydGFibGVdPVwidHJ1ZVwiIChjaGFuZ2VPcmRlcik9XCJ5b3VyRnVuY3Rpb25Ub09yZGVyKCRldmVudClcIj5cbiAqIDx0ciBzdC10YWJsZS1yb3cgKm5nRm9yPVwibGV0IHVzZXJEYXRhIG9mIGRhdGFcIj5cbiAqIDx0ZCBzdC10YWJsZS1jZWxsIHN0LXRhYmxlLXJvdy1jb250ZW50PlxuICogICAgPGxhYmVsID57e3VzZXJEYXRhLmlkfX08L2xhYmVsPlxuICogPC90ZD5cbiAqIDx0ZCBzdC10YWJsZS1jZWxsIHN0LXRhYmxlLXJvdy1jb250ZW50PlxuICogICAgPGxhYmVsID57e3VzZXJEYXRhLm5hbWV9fTwvbGFiZWw+XG4gKiA8L3RkPlxuICogPHRkIHN0LXRhYmxlLWNlbGwgc3QtdGFibGUtcm93LWNvbnRlbnQ+XG4gKiAgICA8bGFiZWwgPnt7dXNlckRhdGEubGFzdE5hbWV9fTwvbGFiZWw+XG4gKiA8L3RkPlxuICogPHRkIHN0LXRhYmxlLWNlbGwgc3QtdGFibGUtcm93LWNvbnRlbnQ+XG4gKiAgICA8bGFiZWwgPnt7dXNlckRhdGEucGhvbmV9fTwvbGFiZWw+XG4gKiA8L3RkPlxuICogPHRkIHN0LXRhYmxlLWNlbGwgc3QtdGFibGUtcm93LWNvbnRlbnQ+XG4gKiAgICA8bGFiZWwgPnt7dXNlckRhdGEuY29tcGFueX19PC9sYWJlbD5cbiAqIDwvdGQ+XG4gKiA8dGQgc3QtdGFibGUtY2VsbCBzdC10YWJsZS1yb3ctY29udGVudD5cbiAqICAgIDxsYWJlbCA+e3t1c2VyRGF0YS5jb21wbGV0ZWRQcm9maWxlfX08L2xhYmVsPlxuICogPC90ZD5cbiAqIDx0ZCBzdC10YWJsZS1yb3ctaG92ZXI+XG4gKiAgICA8aSBjbGFzcz1cImljb24gaWNvbi1hcnJvdzJfcmlnaHRcIj48L2k+XG4gKiA8L3RkPlxuICogPC90cj5cbiAqIDwvc3QtdGFibGU+XG4gKiBgYGBcbiAqXG4gKi9cbkBTdEVnZW8oKVxuQENvbXBvbmVudCh7XG4gICBzZWxlY3RvcjogJ3N0LXRhYmxlJyxcbiAgIHRlbXBsYXRlVXJsOiAnLi9zdC10YWJsZS5jb21wb25lbnQuaHRtbCcsXG4gICBzdHlsZVVybHM6IFsnLi9zdC10YWJsZS5jb21wb25lbnQuc2NzcyddLFxuICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5cbmV4cG9ydCBjbGFzcyBTdFRhYmxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgIC8qKiBASW5wdXQge1N0VGFibGVIZWFkZXJbXX0gW2ZpZWxkcz0nJ10gTGlzdCBvZiBmaWVsZCBkaXNwbGF5ZWQgaW4gdGhlIGhlYWRlciAqL1xuICAgQElucHV0KCkgQFN0UmVxdWlyZWQoKSBmaWVsZHM6IFN0VGFibGVIZWFkZXJbXTtcbiAgIC8qKiBASW5wdXQge3N0cmluZ30gW3FhVGFnPScnXSBQcmVmaXggdXNlZCB0byBnZW5lcmF0ZSB0aGUgaWQgdmFsdWVzIGZvciBxYSB0ZXN0cyAqL1xuICAgQElucHV0KCkgcWFUYWc6IHN0cmluZztcbiAgIC8qKiBASW5wdXQge2Jvb2xlYW59IFtoZWFkZXI9dHJ1ZV0gQm9vbGVhbiB0byBzaG93IG9yIGhpZGUgdGhlIGhlYWRlciAqL1xuICAgQElucHV0KCkgaGVhZGVyOiBib29sZWFuID0gdHJ1ZTtcbiAgIC8qKlxuICAgICogQElucHV0IHtib29sZWFufSBbc29ydGFibGU9dHJ1ZV0gQm9vbGVhbiB0byBtYWtlIHNvcnRhYmxlIHRoZSB0YWJsZSwgVG8gZW5hYmxlIHNvcnRpbmcgb2YgY29sdW1ucyB1c2VcbiAgICAqIHRoZSBuZXcgXCJzb3J0YWJsZVwiIGZpZWxkIGluc2lkZSBzdFRhYmxlSGVhZGVyIG1vZGVsXG4gICAgKi9cbiAgIEBJbnB1dCgpIHNvcnRhYmxlOiBib29sZWFuID0gdHJ1ZTtcbiAgIC8qKlxuICAgICogQElucHV0IHtib29sZWFufSBbZmlsdGVyYWJsZT10cnVlXSBCb29sZWFuIHRvIG1ha2UgZmlsdGVyYWJsZSB0aGUgdGFibGUsIFRvIGVuYWJsZSBmaWx0ZXJpbmcgb2YgY29sdW1ucyB1c2VcbiAgICAqIHRoZSBuZXcgXCJmaWx0ZXJhYmxlXCIgZmllbGQgaW5zaWRlIHN0VGFibGVIZWFkZXIgbW9kZWwgKG5lY2VzYXJ5IGRlZmluZSBmaWx0ZXJDb25maWcpLlxuICAgICovXG4gICBASW5wdXQoKSBmaWx0ZXJhYmxlOiBib29sZWFuID0gZmFsc2U7XG4gICAvKipcbiAgICAqIEBJbnB1dCB7Ym9vbGVhbn0gW3NlbGVjdGFibGVBbGw9ZmFsc2VdIEJvb2xlYW4gdG8gc2hvdyBvciBoaWRlIGEgY2hlY2tib3ggaW4gdGhlIGhlYWRlciB0byBzZWxlY3Qgb3JcbiAgICAqICBkZXNlbGVjdCBhbGwgcm93c1xuICAgICovXG4gICBASW5wdXQoKSBzZWxlY3RhYmxlQWxsOiBib29sZWFuID0gZmFsc2U7XG5cbiAgIC8qKiBASW5wdXQge09yZGVyfSBbY3VycmVudE9yZGVyPScnXSBJdCBzcGVjaWZpZXMgd2hhdCBpcyB0aGUgY3VycmVudCBvcmRlciBhcHBsaWVkIHRvIHRoZSB0YWJsZSAqL1xuICAgQElucHV0KCkgY3VycmVudE9yZGVyOiBPcmRlcjtcblxuICAgLyoqIEBJbnB1dCB7VGVtcGxhdGVSZWZ9IFt0ZW1wbGF0ZUNvbnRlbnRGaWx0ZXI9dW5kZWZpbmVkXSBSZWZlcmVuY2UgdG8gcGFpbnQgYSBjdXN0b20gdGVtcGxhdGUgaW5zaWRlIHBvcG92ZXIgY29udGVudCAqL1xuICAgQElucHV0KCkgdGVtcGxhdGVDb250ZW50RmlsdGVyPzogVGVtcGxhdGVSZWY8YW55PjtcbiAgIC8qKiBASW5wdXQge2Jvb2xlYW5bXX0gW3N0YXR1c0ZpbHRlcj0nJ10gTGlzdCBvZiBzdGF0dXMgZmlsdGVyIGJ5IGNvbHVtbiwgbmVlZGVkIHdpdGggdGVtcGxhdGVDb250ZW50RmlsdGVyICovXG4gICBASW5wdXQoKSBzdGF0dXNGaWx0ZXI/OiBib29sZWFuW107XG4gICAvKiogQElucHV0IHtTdFRhYmxlSWNvbkNsYXNzZXN9IFtpY29uQ2xhc3Nlcz0nJ10gTGlzdCBvZiBpY29uIGNsYXNzZXMgKi9cbiAgIEBJbnB1dCgpIGljb25DbGFzc2VzPzogU3RUYWJsZUljb25DbGFzc2VzID0gbmV3IFN0VGFibGVJY29uQ2xhc3NlcygpO1xuXG4gICAvKiogQElucHV0IHtib29sZWFufSBbZml4ZWRIZWFkZXI9ZmFsc2VdIEJvb2xlYW4gdG8gZml4IHRoZSB0YWJsZSBoZWFkZXIgKi9cbiAgIEBJbnB1dCgpXG4gICBASG9zdEJpbmRpbmcoJ2NsYXNzLnN0LWN1c3RvbS1zY3JvbGxiYXInKVxuICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5maXhlZC1oZWFkZXInKVxuICAgZ2V0IGZpeGVkSGVhZGVyKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZpeGVkSGVhZGVyO1xuICAgfVxuICAgc2V0IGZpeGVkSGVhZGVyKG5ld1ZhbHVlOiBib29sZWFuKSB7XG4gICAgICB0aGlzLl9maXhlZEhlYWRlciA9IG5ld1ZhbHVlO1xuICAgfVxuXG4gICAvKiogQElucHV0IHtzdHJpbmd9IFtjdXN0b21DbGFzc2VzPV0gQ2xhc3NlcyBmb3IgYWRkaW5nIHN0eWxlcyB0byB0YWJsZSB0YWcgZnJvbSBvdXRzaWRlLiBUaGVzZSBjYW4gYmU6IHNlcGFyYXRlZC1yb3dzICovXG4gICBASW5wdXQoKVxuICAgZ2V0IGN1c3RvbUNsYXNzZXMoKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiB0aGlzLl9jdXN0b21DbGFzc2VzO1xuICAgfVxuXG4gICBzZXQgY3VzdG9tQ2xhc3NlcyhuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgICB0aGlzLnRhYmxlQ2xhc3Nlc1t0aGlzLl9jdXN0b21DbGFzc2VzXSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2N1c3RvbUNsYXNzZXMgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMudGFibGVDbGFzc2VzW3RoaXMuX2N1c3RvbUNsYXNzZXNdID0gdGhpcy5fY3VzdG9tQ2xhc3NlcztcbiAgIH1cblxuICAgLyoqIEBJbnB1dCB7Ym9vbGVhbn0gW3NlbGVjdGVkQWxsPWZhbHNlXSBJdCBzcGVjaWZpZXMgaWYgYWxsIHJvd3MgYXJlIHNlbGVjdGVkICovXG4gICBASW5wdXQoKVxuICAgZ2V0IHNlbGVjdGVkQWxsKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkQWxsO1xuICAgfVxuXG4gICBzZXQgc2VsZWN0ZWRBbGwobmV3VmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgIHRoaXMuX3NlbGVjdGVkQWxsID0gbmV3VmFsdWU7XG4gICAgICB0aGlzLl9jZC5tYXJrRm9yQ2hlY2soKTtcbiAgIH1cblxuICAgLyoqIEBJbnB1dCB7Ym9vbGVhbn0gW2hhc0hvdmVyTWVudT1mYWxzZV0gSXQgc3BlY2lmaWVzIGlmIGEgbWVudSBoYXMgdG8gYmUgZGlzcGxheWVkIHdoZW4gdXNlciBwdXRzIHRoZSBtb3VzZSBvdmVyXG4gICAgKiB0aGUgcm93cy4gUmVtZW1iZXIgdG8gYWRkIGEgY2VsbCB3aXRoIHRoZSBzZWxlY3RvciBzdC10YWJsZS1yb3ctaG92ZXIgZm9yIGFkZGluZyBjb250ZW50IHRvIHRoZSBtZW51XG4gICAgKi9cbiAgIEBJbnB1dCgpXG4gICBnZXQgaGFzSG92ZXJNZW51KCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhc0hvdmVyTWVudTtcbiAgIH1cblxuICAgc2V0IGhhc0hvdmVyTWVudShuZXdWYWx1ZTogYm9vbGVhbikge1xuICAgICAgdGhpcy5faGFzSG92ZXJNZW51ID0gbmV3VmFsdWU7XG4gICB9XG5cbiAgIC8qKiBAT3V0cHV0IHtPcmRlcn0gW2NoYW5nZU9yZGVyPScnXSBFdmVudCBlbWl0dGVkIHdpdGggdGhlIG5ldyBvcmRlciB3aGljaCBoYXMgdG8gYmUgYXBwbGllZCB0byB0aGUgdGFibGUgcm93cyAqL1xuICAgQE91dHB1dCgpIGNoYW5nZU9yZGVyOiBFdmVudEVtaXR0ZXI8T3JkZXI+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgLyoqIEBPdXRwdXQge2Jvb2xlYW59IFtzZWxlY3RBbGw9JyddIEV2ZW50IGVtaXR0ZWQgd2hlbiB1c2VyIGludGVyYWN0cyB3aXRoIHRoZSBjaGVja2JveCB0byBzZWxlY3Qgb3IgZGVzZWxlY3RcbiAgICAqIGFsbCByb3dzXG4gICAgKi9cbiAgIEBPdXRwdXQoKSBzZWxlY3RBbGw6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgLyoqIEBPdXRwdXQge3N0cmluZ30gW2NsaWNrRmlsdGVyPV0gRXZlbnQgZW1pdHRlZCB3aGVuIGNsaWNraW5nIG9uIGZpbHRlcnMgaWNvbiAgKi9cbiAgIEBPdXRwdXQoKSBjbGlja0ZpbHRlcjogRXZlbnRFbWl0dGVyPFN0VGFibGVIZWFkZXI+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAvKiogQE91dHB1dCB7U3RUYWJsZUhlYWRlcltdfSBbc2VsZWN0RmlsdGVycz0nJ10gRXZlbnQgZW1pdHRlZCAgd2hlbiB1c2VyIGludGVyYWN0cyB3aXRoIGZpbHRlciBidXR0b24gd2l0aG91dCBhIGN1c3RvbSB0ZW1wbGF0ZSAqL1xuICAgQE91dHB1dCgpIHNlbGVjdEZpbHRlcnM6IEV2ZW50RW1pdHRlcjxTdFRhYmxlSGVhZGVyW10+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICBwdWJsaWMgdGFibGVDbGFzc2VzOiBhbnkgPSB7fTtcbiAgIHB1YmxpYyBvcmRlclR5cGVzOiBhbnkgPSBPUkRFUl9UWVBFO1xuICAgcHVibGljIHZpc2libGVGaWx0ZXI6IG51bWJlciA9IC0xO1xuXG4gICBwcml2YXRlIF9maXhlZEhlYWRlcjogYm9vbGVhbiA9IGZhbHNlO1xuICAgcHJpdmF0ZSBfc2VsZWN0ZWRBbGw6IGJvb2xlYW47XG4gICBwcml2YXRlIF9oYXNIb3Zlck1lbnU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIHByaXZhdGUgX2N1c3RvbUNsYXNzZXM6IHN0cmluZztcblxuICAgY29uc3RydWN0b3IocHJpdmF0ZSBfY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICB9XG5cbiAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgaWYgKHRoaXMuZmlsdGVyYWJsZSAmJiAhdGhpcy5zdGF0dXNGaWx0ZXIpIHtcbiAgICAgICAgIHRoaXMuc3RhdHVzRmlsdGVyID0gbmV3IEFycmF5KHRoaXMuZmllbGRzLmxlbmd0aCk7XG4gICAgICAgICB0aGlzLnN0YXR1c0ZpbHRlci5maWxsKGZhbHNlKTtcbiAgICAgIH1cbiAgIH1cblxuICAgcHVibGljIGdldEhlYWRlckl0ZW1DbGFzcyhmaWVsZDogU3RUYWJsZUhlYWRlcik6IHN0cmluZyB7XG4gICAgICBsZXQgaXNPcmRlckFzYyA9IHRoaXMuaXNTb3J0ZWRCeUZpZWxkQW5kRGlyZWN0aW9uKGZpZWxkLCB0aGlzLm9yZGVyVHlwZXMuQVNDKTtcbiAgICAgIHJldHVybiBpc09yZGVyQXNjID8gdGhpcy5pY29uQ2xhc3Nlcy5zb3J0LmFzYyA6IHRoaXMuaWNvbkNsYXNzZXMuc29ydC5kZXNjO1xuICAgfVxuXG4gICBwdWJsaWMgaXNTb3J0YWJsZShmaWVsZDogU3RUYWJsZUhlYWRlcik6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIGZpZWxkICYmIGZpZWxkLnNvcnRhYmxlICE9PSB1bmRlZmluZWQgPyBmaWVsZC5zb3J0YWJsZSA6IHRoaXMuc29ydGFibGU7XG4gICB9XG5cbiAgIHB1YmxpYyBpc1NvcnRlZEJ5RmllbGQoZmllbGQ6IFN0VGFibGVIZWFkZXIpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRPcmRlciAmJiB0aGlzLmN1cnJlbnRPcmRlci5vcmRlckJ5ID09PSBmaWVsZC5pZDtcbiAgIH1cblxuICAgcHVibGljIGlzRmlsdGVyYWJsZShmaWVsZDogU3RUYWJsZUhlYWRlcik6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyYWJsZSAmJiAoX2dldChmaWVsZCwgJ2ZpbHRlcnMuZmlsdGVyQ29uZmlnJykpIHx8XG4gICAgICAgICAgICAodGhpcy50ZW1wbGF0ZUNvbnRlbnRGaWx0ZXIgJiYgX2dldChmaWVsZCwgJ2ZpbHRlcnMnKSkgfHxcbiAgICAgICAgICAgIF9nZXQoZmllbGQsICdmaWx0ZXJzLnRlbXBsYXRlUmVmJyk7XG4gICB9XG5cbiAgIHB1YmxpYyBvbkNsaWNrUG9wb3ZlcihpbmRleDogbnVtYmVyLCBmaWVsZDogU3RUYWJsZUhlYWRlcik6IHZvaWQge1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUZpbHRlciA9PT0gaW5kZXgpIHtcbiAgICAgICAgIHRoaXMudmlzaWJsZUZpbHRlciA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMudmlzaWJsZUZpbHRlciA9IGluZGV4O1xuICAgICAgfVxuICAgICAgdGhpcy5jbGlja0ZpbHRlci5lbWl0KGZpZWxkKTtcbiAgICAgIHRoaXMuX2NkLm1hcmtGb3JDaGVjaygpO1xuICAgfVxuXG4gICBwdWJsaWMgb25DaGFuZ2VPcmRlcihmaWVsZDogU3RUYWJsZUhlYWRlcik6IHZvaWQge1xuICAgICAgbGV0IF9jdXJyZW50T3JkZXI6IE9yZGVyO1xuICAgICAgaWYgKGZpZWxkICYmIHRoaXMuaXNTb3J0YWJsZShmaWVsZCkpIHtcbiAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcmRlciAmJiB0aGlzLmN1cnJlbnRPcmRlci5vcmRlckJ5ID09PSBmaWVsZC5pZCkge1xuICAgICAgICAgICAgX2N1cnJlbnRPcmRlciA9IHRoaXMuY2hhbmdlT3JkZXJEaXJlY3Rpb24oKTtcbiAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfY3VycmVudE9yZGVyID0gbmV3IE9yZGVyKGZpZWxkLmlkLCBPUkRFUl9UWVBFLkFTQyk7XG4gICAgICAgICB9XG4gICAgICAgICB0aGlzLmNoYW5nZU9yZGVyLmVtaXQoX2N1cnJlbnRPcmRlcik7XG4gICAgICB9XG4gICB9XG5cbiAgIHB1YmxpYyBvblNlbGVjdEFsbChldmVudDogYW55KTogdm9pZCB7XG4gICAgICB0aGlzLnNlbGVjdEFsbC5lbWl0KGV2ZW50LmNoZWNrZWQpO1xuICAgfVxuXG4gICBwdWJsaWMgb25TZWxlY3RlZEZpbHRlcnMoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICBsZXQgc2VsZWN0ZWRGaWx0ZXJzID0gX2Nsb25lRGVlcCh0aGlzLmZpZWxkcyk7XG4gICAgICBzZWxlY3RlZEZpbHRlcnMgPSBzZWxlY3RlZEZpbHRlcnMuZmlsdGVyKChmaWVsZCkgPT4ge1xuICAgICAgICAgaWYgKF9nZXQoZmllbGQsICdmaWx0ZXJzLmZpbHRlckNvbmZpZycpKSB7XG4gICAgICAgICAgICBmaWVsZC5maWx0ZXJzLmZpbHRlckNvbmZpZyA9IGZpZWxkLmZpbHRlcnMuZmlsdGVyQ29uZmlnLmZpbHRlcigoY29uZikgPT4gY29uZi5zZWxlY3RlZCk7XG4gICAgICAgICAgICBpZiAoZmllbGQuZmlsdGVycy5maWx0ZXJDb25maWcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNlbGVjdEZpbHRlcnMuZW1pdChzZWxlY3RlZEZpbHRlcnMpO1xuICAgfVxuXG4gICBwcml2YXRlIGNoYW5nZU9yZGVyRGlyZWN0aW9uKCk6IE9yZGVyIHtcbiAgICAgIGxldCBuZXdEaXJlY3Rpb24gPSB0aGlzLmN1cnJlbnRPcmRlci50eXBlID09PSBPUkRFUl9UWVBFLkFTQyA/IE9SREVSX1RZUEUuREVTQyA6IE9SREVSX1RZUEUuQVNDO1xuICAgICAgcmV0dXJuIG5ldyBPcmRlcih0aGlzLmN1cnJlbnRPcmRlci5vcmRlckJ5LCBuZXdEaXJlY3Rpb24pO1xuICAgfVxuXG4gICBwcml2YXRlIGlzU29ydGVkQnlGaWVsZEFuZERpcmVjdGlvbihmaWVsZDogU3RUYWJsZUhlYWRlciwgb3JkZXJUeXBlOiBPUkRFUl9UWVBFKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5pc1NvcnRlZEJ5RmllbGQoZmllbGQpICYmIHRoaXMuY3VycmVudE9yZGVyLnR5cGUgPT09IG9yZGVyVHlwZTtcbiAgIH1cbn1cbiJdfQ==